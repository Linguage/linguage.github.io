<!doctype html><html lang=zh-CN class=skin-gold><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>「Scripts」Module 4: Practical Tips for Building Agentic AI • Linguista</title><script>(function(){try{var s="theme",e=window.localStorage?localStorage.getItem(s):null,n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=e==="dark"||e==="light"?e:n?"dark":null;t?document.documentElement.dataset.theme=t:delete document.documentElement.dataset.theme,document.documentElement.classList.toggle("dark",t==="dark")}catch{}})()</script><link rel=preconnect href=https://fonts.loli.net><link rel=preconnect href=https://gstatic.loli.net crossorigin><link href="https://fonts.loli.net/css2?family=Inter:wght@400;500;600&family=Lora:wght@500;600&family=Josefin+Sans:wght@400;600;700&display=swap" rel=stylesheet><link rel=stylesheet href="/css/amp.css?v=20260125-03"><link rel=stylesheet href="/css/toc.css?v=20260125-03"><style>:root{--bg:#ffffff;--surface:#ffffff;--text:#2b2b2b;--muted:#6c757d;--border:#e9ecef;--brand-text:var(--text, #2b2b2b);--brand-muted:var(--muted, #6c757d);--brand-surface:var(--surface, #ffffff);--brand-border:var(--border, #e9ecef);--brand-accent:var(--accent, #2E7D6B);--brand-accent-soft:rgba(46, 125, 107, 0.12);--brand-accent-soft-strong:rgba(46, 125, 107, 0.18);--gold:#e6db74;--gold-soft:rgba(230, 219, 116, 0.12);--gold-soft-strong:rgba(230, 219, 116, 0.2);--hero-pattern-color:#000000;--hero-pattern-opacity:0.2}html[data-theme=dark]{--bg:#000000;--surface:#111111;--text:#ffffff;--muted:#a1a1aa;--border:#333333;--hero-pattern-color:#ffffff;--hero-pattern-opacity:0.3}.container h1:first-of-type{color:var(--brand-accent)}.hero .hero-title{color:inherit!important}.hero .hero-title .hero-greeting{color:var(--brand-text,#111)!important}.hero .hero-title .hero-brand{color:var(--brand-accent,#0e6a85)!important}html[data-theme=dark] .hero .hero-title .hero-greeting{color:#f8f8f2}html[data-theme=dark] .hero .hero-title .hero-brand{color:var(--gold)}html[data-theme=dark] .container h1{color:#f8f8f2}html[data-theme=dark] .container,html[data-theme=dark] .hero{--brand-accent:var(--gold)}:is(.container,.prose) h2{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;margin:2.6rem auto 2.4rem;padding:0 0 .9rem;font-weight:600;text-align:center;color:var(--heading-h2-color,#14532d)}:is(.container,.prose) h2 .anchor-link{position:absolute;top:50%;right:clamp(16px,3vw,48px);transform:translateY(-50%);font-size:1.3rem;color:color-mix(in srgb,var(--heading-h2-color,#14532d) 70%,transparent 30%);text-decoration:none;opacity:0;transition:opacity .2s ease,color .2s ease}:is(.container,.prose) h2:hover .anchor-link,:is(.container,.prose) h2 .anchor-link:focus{opacity:1;color:var(--heading-h2-color,#14532d)}:is(.container,.prose) h2::after{content:"";position:absolute;left:50%;bottom:0;width:clamp(220px,38vw,520px);height:3px;transform:translateX(-50%);background:linear-gradient(90deg,color-mix(in srgb,var(--heading-h2-color,#14532d) 0%,transparent 100%) 0%,color-mix(in srgb,var(--heading-h2-color,#14532d) 22%,transparent 78%) 20%,color-mix(in srgb,var(--heading-h2-color,#14532d) 75%,transparent 25%) 50%,color-mix(in srgb,var(--heading-h2-color,#14532d) 22%,transparent 78%) 80%,color-mix(in srgb,var(--heading-h2-color,#14532d) 0%,transparent 100%) 100%);border-radius:999px}:is(.container,.prose) h2::before{content:"";position:absolute;left:50%;bottom:-8px;width:clamp(120px,28vw,360px);height:1px;transform:translateX(-50%);background:linear-gradient(90deg,color-mix(in srgb,var(--heading-h2-color,#14532d) 0%,transparent 100%) 0%,color-mix(in srgb,var(--heading-h2-color,#14532d) 35%,transparent 65%) 45%,color-mix(in srgb,var(--heading-h2-color,#14532d) 70%,transparent 30%) 50%,color-mix(in srgb,var(--heading-h2-color,#14532d) 35%,transparent 65%) 55%,color-mix(in srgb,var(--heading-h2-color,#14532d) 0%,transparent 100%) 100%);opacity:.85}:is(.container,.prose) h2 a{color:var(--brand-accent,#0e6a85)}:is(.container,.prose) h2 a:visited{color:var(--brand-accent-visited,#094c60)}html[data-theme=dark] :is(.container,.prose) h2{--heading-h2-color:rgba(230,219,116,1);color:var(--heading-h2-color)}html[data-theme=dark] .prose h2,html[data-theme=dark] .container h2{color:#e6db74}html[data-theme=dark] :is(.container,.prose) h2 a{color:var(--gold)}html[data-theme=dark] :is(.container,.prose) h2 a:visited{color:rgba(230,219,116,.85)}.container h3{border-left:4px solid var(--brand-accent);border-bottom:1px solid rgba(46,125,107,.25);padding-left:14px;padding-bottom:6px;margin-top:1.5rem;margin-bottom:.75rem;color:var(--brand-text)}.container h4{border-left:3px solid var(--brand-accent);border-bottom:1px solid rgba(46,125,107,.2);padding-left:12px;padding-bottom:4px;margin-top:1.25rem;margin-bottom:.5rem;color:var(--brand-text);font-weight:500}.container h5{border-left:2px solid var(--brand-accent);border-bottom:1px solid rgba(46,125,107,.15);padding-left:10px;padding-bottom:3px;margin-top:1rem;margin-bottom:.4rem;color:var(--brand-text);font-weight:500}.container h6{border-left:1px solid var(--brand-accent);border-bottom:1px solid rgba(46,125,107,.1);padding-left:8px;padding-bottom:2px;margin-top:.75rem;margin-bottom:.3rem;color:var(--brand-text);font-weight:500}.container blockquote{margin:30px 0;padding:20px 25px;border-left:4px solid var(--brand-muted);background-color:#f8f9fa;font-style:italic;border-radius:0 8px 8px 0}.container blockquote footer{margin-top:10px;font-size:.9em;color:var(--brand-muted)}.container .figure-caption,.container .caption,.container figure figcaption,.container .table-caption,.container table caption,.container .quarto-float-caption-top,.container .quarto-float-caption{text-align:left!important;caption-side:top!important;font-weight:500!important;margin-bottom:.75rem!important;margin-top:1rem!important;color:var(--brand-muted)!important;font-size:.9rem!important;line-height:1.4!important}html[data-theme=dark] .container h2{border-color:rgba(230,219,116,.22);color:#f8f8f2}.container h2 a{color:var(--brand-accent,#0e6a85)}.container h2 a:visited{color:var(--brand-accent-visited,#094c60)}html[data-theme=dark] .container blockquote{background-color:rgba(230,219,116,8%);border-left-color:rgba(230,219,116,.6)}html[data-theme=dark] .docs-content .prose blockquote,html[data-theme=dark] .prose blockquote{background-color:rgba(230,219,116,8%);border-left-color:rgba(230,219,116,.6)}html[data-theme=dark] .container .figure-caption,html[data-theme=dark] .container .caption,html[data-theme=dark] .container figure figcaption,html[data-theme=dark] .container .table-caption,html[data-theme=dark] .container table caption,html[data-theme=dark] .container .quarto-float-caption-top,html[data-theme=dark] .container .quarto-float-caption{color:#c9ced6!important}html[data-theme=dark] .container h1:first-of-type{color:var(--brand-color,var(--link-color,var(--gold)))}html[data-theme=dark] .container h3{border-left-color:var(--gold);border-bottom-color:rgba(230,219,116,.22);color:#f8f8f2}html[data-theme=dark] .container h4{border-left-color:var(--gold);border-bottom-color:rgba(230,219,116,.18);color:#f8f8f2}html[data-theme=dark] .container h5{border-left-color:var(--gold);border-bottom-color:rgba(230,219,116,.14);color:#f8f8f2}html[data-theme=dark] .container h6{border-left-color:var(--gold);border-bottom-color:rgba(230,219,116,.1);color:#f8f8f2}.prose a{color:var(--link-color,var(--brand-accent,#0e6a85))}.prose a:visited{color:var(--visited-color,var(--brand-accent-visited,#094c60))}html[data-theme=dark] .prose a{color:var(--gold)}html[data-theme=dark] .prose a:visited{color:rgba(230,219,116,.85)}html[data-theme=dark] .callout{background:rgba(255,255,255,6%);border-color:rgba(255,255,255,.18)}html[data-theme=dark] .callout.tip{background:rgba(230,219,116,8%);border-color:rgba(230,219,116,.22)}html[data-theme=dark] .callout.warn{background:rgba(253,151,31,.1);border-color:rgba(253,151,31,.28)}.search-hit-flash{animation:searchHitFlash 1.2s ease-out 1;outline:2px solid var(--accent-2,#0F6DDC);outline-offset:2px;scroll-margin-top:calc(var(--theme-header-height,64px) + 8px)}@keyframes searchHitFlash{0%{background-color:rgba(15,109,220,.18)}60%{background-color:rgba(15,109,220,8%)}100%{background-color:initial}}</style><style>:root{--theme-breadcrumbs-height:0px}</style><script>window.tailwind=window.tailwind||{},tailwind.config={darkMode:["class",'[data-theme="dark"]'],theme:{extend:{colors:{bg:"var(--bg)",surface:"var(--surface)",border:"var(--border)",text:"var(--text)",muted:"var(--muted)",accent:"var(--accent)","accent-2":"var(--accent-2)"},fontFamily:{sans:["Inter","system-ui","-apple-system","Segoe UI","Roboto","sans-serif"],serif:["Lora","Georgia","Times New Roman","serif"],josefin:['"Josefin Sans"',"sans-serif"]},maxWidth:{container:"var(--container)"},spacing:{header:"var(--theme-header-height)",footer:"var(--theme-footer-height)"}}},corePlugins:{preflight:!1},safelist:["group/link-card","sm:flex-row","sm:items-center","h-[84px]","w-[84px]","sm:h-[84px]","sm:w-[84px]","line-clamp-2"]}</script><script src="https://cdn.tailwindcss.com?plugins=aspect-ratio"></script><style>html.skin-gold{--gold:#e6db74;--deep-green:#0e6a85;--deep-green-visited:#094c60}html.skin-gold[data-theme=light],html.skin-gold:not([data-theme]){--bg:#ffffff;--surface:#ffffff;--text:#2b2b2b;--muted:#6c757d;--border:#e9ecef;--accent:var(--deep-green);--accent-2:var(--deep-green);--link-color:var(--deep-green);--visited-color:var(--deep-green-visited)}@media(prefers-color-scheme:light){html.skin-gold:not([data-theme]){--bg:#ffffff;--surface:#ffffff;--text:#2b2b2b;--muted:#6c757d;--border:#e9ecef;--accent:var(--deep-green);--accent-2:var(--deep-green);--link-color:var(--deep-green);--visited-color:var(--deep-green-visited)}}html.skin-gold[data-theme=dark]{--bg:#000000;--surface:#111111;--text:#ffffff;--muted:#a1a1aa;--border:#333333;--accent:var(--gold);--accent-2:var(--gold);--link-color:var(--gold);--visited-color:rgba(230,219,116,0.85);--tw-prose-body:#ffffff;--tw-prose-headings:var(--gold);--tw-prose-lead:#ffffff;--tw-prose-links:var(--gold);--tw-prose-bold:var(--gold);--tw-prose-counters:var(--gold);--tw-prose-bullets:var(--gold);--tw-prose-hr:var(--border);--tw-prose-quotes:#ffffff;--tw-prose-quote-borders:var(--gold);--tw-prose-captions:var(--muted);--tw-prose-code:var(--gold);--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#111111;--tw-prose-th-borders:var(--border);--tw-prose-td-borders:var(--border)}@media(prefers-color-scheme:dark){html.skin-gold:not([data-theme]){--bg:#000000;--surface:#111111;--text:#ffffff;--muted:#a1a1aa;--border:#333333;--accent:var(--gold);--accent-2:var(--gold);--link-color:var(--gold);--visited-color:rgba(230,219,116,0.85);--tw-prose-body:#ffffff;--tw-prose-headings:var(--gold);--tw-prose-lead:#ffffff;--tw-prose-links:var(--gold);--tw-prose-bold:var(--gold);--tw-prose-counters:var(--gold);--tw-prose-bullets:var(--gold);--tw-prose-hr:var(--border);--tw-prose-quotes:#ffffff;--tw-prose-quote-borders:var(--gold);--tw-prose-captions:var(--muted);--tw-prose-code:var(--gold);--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#111111;--tw-prose-th-borders:var(--border);--tw-prose-td-borders:var(--border)}}html.skin-gold .hero-title .hero-greeting{color:var(--text,#111)}html.skin-gold .hero-title .hero-brand{color:var(--link-color)}html.skin-gold[data-theme=dark] .hero-title .hero-greeting{color:var(--text)}html.skin-gold .prose a{color:var(--link-color)}html.skin-gold .prose a:visited{color:var(--visited-color)}html.skin-gold[data-theme=dark] .container blockquote{background-color:rgba(230,219,116,.1);border-left-color:var(--gold)}html.skin-gold[data-theme=dark] .container table th{border-bottom-color:rgba(230,219,116,.3)}</style><style>:root{}.footer-hidden{transform:translateY(100%);opacity:.85}.docs-nav a.is-active,.toc a.is-active,.nav-drawer a.is-active{background-color:var(--surface)!important;color:var(--text)!important;font-weight:500!important;box-shadow:0 1px 2px rgba(0,0,0,5%);border-color:var(--border)!important}</style><link rel=icon href=/favicon_io/favicon.ico sizes=any><link rel=icon type=image/png sizes=32x32 href=/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon_io/favicon-16x16.png><link rel=apple-touch-icon href=/favicon_io/apple-touch-icon.png><link rel=manifest href=/favicon_io/site.webmanifest><meta property="og:site_name" content="Linguista"><meta property="og:type" content="article"><meta property="og:title" content="「Scripts」Module 4: Practical Tips for Building Agentic AI"><meta property="og:description" content="```"><meta property="og:url" content="https://linguista.cn/courses/andrew-ng-agentic-ai/lecture/lec-04/"><meta property="og:image" content="https://linguista.cn/img/Linguista_imresizer.png"><meta property="og:image:width" content="400"><meta property="og:image:height" content="400"><meta name=twitter:card content="summary"><meta name=twitter:site content="@linguista2025"><meta name=twitter:creator content="@linguista2025"><meta name=twitter:title content="「Scripts」Module 4: Practical Tips for Building Agentic AI"><meta name=twitter:description content="```"><meta name=twitter:image content="https://linguista.cn/img/Linguista_imresizer.png"><link rel=canonical href=https://linguista.cn/courses/andrew-ng-agentic-ai/lecture/lec-04/><script>window.MathJax={loader:{load:["[tex]/ams"]},tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,packages:{"[+]":["ams"]},macros:{unicodeInt:[`\\mathop{\\vcenter{\\mathchoice{\\huge\\unicode{#1}}{\\unicode{#1}}{\\unicode{#1}}{\\unicode{#1}}}}\\nolimits`,1],oiint:"\\unicodeInt{x222F}",oiiint:"\\unicodeInt{x2230}"}},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"]}}</script><script defer src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-99PGBGJH4S"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-99PGBGJH4S")</script></head><body class="bg-bg text-text font-sans antialiased pt-header min-h-screen flex flex-col" style=background-color:var(--bg);color:var(--text)><header class="site-header sticky top-0 z-50 bg-bg/80 backdrop-blur-md border-b border-border transition-colors duration-300"><div class="header-container w-full max-w-none pl-0 pr-4 sm:px-4 lg:px-6 flex items-center gap-6 h-16"><div class=header-before></div><div class="header-brand flex items-center gap-3 shrink-0"><button id=navToggleBtn class="nav-toggle-btn inline-flex items-center justify-center w-10 h-10 rounded-full hover:bg-black/5 dark:hover:bg-white/10 text-text transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-accent" aria-controls=navDrawer aria-expanded=false aria-label="Toggle menu">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
</button>
<a href=/ id=brand-logo class="flex items-center gap-2 font-josefin font-bold text-2xl tracking-tight text-accent hover:opacity-80 transition-opacity no-underline" style="font-family:josefin sans,sans-serif!important;color:var(--accent)!important"><span class=md:hidden>Ling</span>
<span class="hidden md:inline">Linguista</span>
<span id=comm-dot class="inline-block w-2 h-2 rounded-full bg-accent ml-1 animate-pulse" style=background-color:var(--accent);vertical-align:middle title="Browser Communication: Active"></span>
</a><script>console.log("%c Cascade Agent Connected ","background: #2E7D6B; color: #fff; border-radius: 3px; padding: 2px 5px;"),console.log("Visual Communication: The pulsing dot next to the logo indicates CSS variables are active.");const logo=document.getElementById("brand-logo");if(logo){const e=getComputedStyle(logo).color;console.log("Diagnostics - Logo Color:",e),console.log("Diagnostics - Theme Mode:",document.documentElement.dataset.theme||"auto/light"),console.log("Diagnostics - Font Family:",getComputedStyle(logo).fontFamily)}</script></div><div class="header-search flex-1 flex justify-center px-4"><div id=siteSearchContainer class="site-search relative flex items-center w-full max-w-md transition-all duration-300" role=search><button id=searchBackBtn class="mobile-search-back hidden mr-2 text-muted hover:text-text" aria-label=Cancel type=button>
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
</button>
<span class="site-search-icon absolute left-3 text-muted pointer-events-none transition-opacity" aria-hidden=true><svg width="16" height="16" viewBox="0 0 24 24" fill="none"><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/><line x1="16.65" y1="16.65" x2="21" y2="21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
</span><input id=globalSearchInput class="site-search-input w-full bg-black/5 dark:bg-white/5 border border-border rounded-full py-2 pl-10 pr-4 text-sm text-text placeholder-muted focus:bg-surface focus:border-accent focus:outline-none transition-all focus:shadow-md" type=search placeholder=全站搜索… aria-label=站内搜索 autocomplete=off spellcheck=false><div id=globalSearchPopover class="site-search-popover glass-popover absolute top-full left-0 right-0 mt-2 max-h-[80vh] overflow-y-auto border border-border rounded-xl shadow-2xl z-[100] text-text" style=display:none aria-live=polite></div></div></div><div class="header-actions flex items-center gap-2.5 shrink-0"><button id=themeToggle class="inline-flex items-center justify-center min-w-[44px] px-3 py-1.5 text-base rounded-full cursor-pointer border border-border bg-transparent text-text hover:bg-surface transition-colors" aria-label=切换主题 title=切换主题></button></div></div><style>#themeToggle::after{content:'◐'}html[data-theme=dark] #themeToggle::after{content:'◑'}.glass-popover{background-color:rgba(255,255,255,.9);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px)}html[data-theme=dark] .glass-popover{background-color:rgba(0,0,0,.9)}.site-search-popover mark{background-color:#facc15;color:#000!important;border-radius:2px;padding:0 2px;font-weight:600;box-shadow:0 0 0 1px rgba(234,179,8,.5)}html[data-theme=dark] .site-search-popover mark{background-color:#facc15;color:#000!important;box-shadow:0 0 0 1px rgba(234,179,8,.8)}@media(max-width:900px){body.mobile-searching .header-before,body.mobile-searching .header-brand,body.mobile-searching .header-actions{display:none!important}body.mobile-searching .header-container{padding-left:.5rem;padding-right:.5rem;gap:0}body.mobile-searching .header-search{padding-left:0;padding-right:0;flex:1 1 100%}body.mobile-searching #siteSearchContainer{max-width:100%;width:100%}body.mobile-searching #searchBackBtn{display:flex!important;align-items:center;justify-content:center}body.mobile-searching .site-search-icon{display:none}body.mobile-searching #globalSearchInput{padding-left:1rem;width:auto;flex:1}}html:not([data-theme=dark]) #navDrawer{background-color:rgba(255,255,255,.94)!important}html:not([data-theme=dark]) #navDrawer .nav-drawer-header,html:not([data-theme=dark]) #navDrawer .nav-drawer-footer{background-color:rgba(255,255,255,.78)!important}html[data-theme=dark] #navDrawer{background-color:#000!important}html[data-theme=dark] #navDrawer .nav-drawer-header,html[data-theme=dark] #navDrawer .nav-drawer-footer{background-color:#000!important;border-color:rgba(255,255,255,.1)!important}.site-search-popover::-webkit-scrollbar{width:6px}.site-search-popover::-webkit-scrollbar-track{background:0 0}.site-search-popover::-webkit-scrollbar-thumb{background-color:rgba(156,163,175,.5);border-radius:3px}html[data-theme=dark] #mobileTocPanel,html[data-theme=dark] #mobileTocPanel>div:first-child,html[data-theme=dark] #mobileTocToggleBtn{background-color:rgba(0,0,0,.9)!important;border-color:rgba(255,255,255,.15)!important;color:#f4f4f5!important}html[data-theme=dark] #mobileTocPanel h4,html[data-theme=dark] #mobileTocToggleBtn span,html[data-theme=dark] #mobileTocToggleBtn svg{color:#f4f4f5!important}html[data-theme=dark] #mobileTocToggleBtn>div:first-child>div{background-color:rgba(255,255,255,.1)!important}</style></header><div id=navOverlay class="fixed inset-0 z-[90] bg-black/40 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity duration-300" aria-hidden=true></div><aside id=navDrawer class="fixed inset-y-0 left-0 z-[100] w-72 bg-white/92 dark:bg-black/85 backdrop-blur-md border-r border-border transform -translate-x-full transition-transform duration-300 flex flex-col shadow-2xl" aria-hidden=true><div class="nav-drawer-header flex items-center justify-between p-4 border-b border-border bg-white/75 dark:bg-black/60 backdrop-blur-sm"><a href=/ class="font-josefin font-bold text-xl tracking-tight text-accent hover:opacity-80 transition-opacity no-underline">Linguista</a>
<button id=navCloseBtn class="p-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 text-muted transition-colors" aria-label="Close menu">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></button></div><div class="flex-1 overflow-y-auto p-4 custom-scrollbar"><nav class="flex flex-col gap-1 mb-6" aria-label=Primary><div class="text-xs font-semibold text-muted uppercase tracking-wider mb-2 px-2">Menu</div><a class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-text hover:bg-black/5 dark:hover:bg-white/5 transition-colors" href=/rosetta/>Rosetta
</a><a class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-text hover:bg-black/5 dark:hover:bg-white/5 transition-colors" href=/info/>What's UP
</a><a class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-text hover:bg-black/5 dark:hover:bg-white/5 transition-colors" href=/person/>人物选集
</a><a class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-text hover:bg-black/5 dark:hover:bg-white/5 transition-colors" href=/labs/>工坊
</a><a class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-text hover:bg-black/5 dark:hover:bg-white/5 transition-colors" href=/bookmarks/>书签
</a><a class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-text hover:bg-black/5 dark:hover:bg-white/5 transition-colors" href=/about/>关于我</a></nav><div class=nav-drawer-folder><div class="text-xs font-semibold text-muted uppercase tracking-wider mb-2 px-2">Directory</div><nav class="flex flex-col gap-1" aria-label="Current Section"><a class="block px-2.5 py-1.5 rounded-lg text-sm transition-colors border border-transparent text-muted hover:text-text hover:bg-black/5 dark:hover:bg-white/5" href=/courses/andrew-ng-agentic-ai/lecture/lec-01/>「Scripts」Module 1: Introduction to Agentic Workflows</a>
<a class="block px-2.5 py-1.5 rounded-lg text-sm transition-colors border border-transparent text-muted hover:text-text hover:bg-black/5 dark:hover:bg-white/5" href=/courses/andrew-ng-agentic-ai/lecture/lec-02/>「Scripts」Module 2: Reflection Design Pattern</a>
<a class="block px-2.5 py-1.5 rounded-lg text-sm transition-colors border border-transparent text-muted hover:text-text hover:bg-black/5 dark:hover:bg-white/5" href=/courses/andrew-ng-agentic-ai/lecture/lec-03/>「Scripts」Module 3: Tool Use</a>
<a class="block px-2.5 py-1.5 rounded-lg text-sm transition-colors border border-transparent bg-surface text-text font-medium shadow-sm border-border" href=/courses/andrew-ng-agentic-ai/lecture/lec-04/>「Scripts」Module 4: Practical Tips for Building Agentic AI</a>
<a class="block px-2.5 py-1.5 rounded-lg text-sm transition-colors border border-transparent text-muted hover:text-text hover:bg-black/5 dark:hover:bg-white/5" href=/courses/andrew-ng-agentic-ai/lecture/lec-05/>「Scripts」Module 5: Patterns for Highly Autonomous Agents</a></nav></div></div><div class="nav-drawer-footer p-4 border-t border-border bg-white/75 dark:bg-black/60 backdrop-blur-sm"><div class="flex flex-col gap-4"><nav class="flex items-center gap-2 flex-wrap" aria-label="Social links"><a class="inline-flex w-8 h-8 rounded-full items-center justify-center text-muted/80 bg-black/5 no-underline transition-all duration-250 hover:bg-accent hover:text-white hover:-translate-y-0.5 dark:bg-white/10 dark:text-gray-300 dark:hover:bg-gray-200 dark:hover:text-black" href=https://x.com/AztecaAlpaca target=_blank rel=noopener aria-label="X / Twitter"><img src=https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/X_logo.jpg/500px-X_logo.jpg alt="X logo" class="w-4.5 h-4.5 object-contain rounded" loading=lazy decoding=async>
</a><a class="inline-flex w-8 h-8 rounded-full items-center justify-center text-muted/80 bg-black/5 no-underline transition-all duration-250 hover:bg-accent hover:text-white hover:-translate-y-0.5 dark:bg-white/10 dark:text-gray-300 dark:hover:bg-gray-200 dark:hover:text-black" href=https://github.com/Linguage target=_blank rel=noopener aria-label=GitHub><svg viewBox="0 0 24 24" aria-hidden="true" class="w-4.5 h-4.5 block"><path fill="currentColor" fill-rule="evenodd" d="M12 2C6.48 2 2 6.58 2 12.26c0 4.52 2.87 8.35 6.84 9.71.5.1.68-.22.68-.49.0-.24-.01-.87-.01-1.71-2.78.62-3.37-1.37-3.37-1.37-.45-1.18-1.11-1.5-1.11-1.5-.91-.64.07-.63.07-.63 1 .07 1.53 1.05 1.53 1.05.89 1.56 2.34 1.11 2.91.85.09-.66.35-1.11.63-1.37-2.22-.26-4.56-1.14-4.56-5.07.0-1.12.39-2.03 1.03-2.74-.1-.26-.45-1.3.1-2.71.0.0.84-.27 2.75 1.05A9.28 9.28.0 0112 6.84c.85.01 1.71.12 2.51.35 1.9-1.32 2.74-1.05 2.74-1.05.55 1.41.2 2.45.1 2.71.64.71 1.03 1.62 1.03 2.74.0 3.94-2.34 4.8-4.57 5.05.36.32.68.95.68 1.92.0 1.38-.01 2.49-.01 2.83.0.27.18.6.69.49A10.03 10.03.0 0022 12.26C22 6.58 17.52 2 12 2z" clip-rule="evenodd"/></svg>
</a><a class="inline-flex w-8 h-8 rounded-full items-center justify-center text-muted/80 bg-black/5 no-underline transition-all duration-250 hover:bg-accent hover:text-white hover:-translate-y-0.5 dark:bg-white/10 dark:text-gray-300 dark:hover:bg-gray-200 dark:hover:text-black" href=https://linguista.notion.site/linguista-hub target=_blank rel=noopener aria-label=Notion><img src=https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Notion-logo.svg/200px-Notion-logo.svg.png?20220918151013 alt="Notion logo" class="w-4.5 h-4.5 object-contain rounded" loading=lazy decoding=async>
</a><a class="inline-flex w-auto min-w-[32px] px-3.5 h-8 rounded-full items-center justify-center text-sm font-semibold tracking-wide leading-none text-muted/80 bg-black/5 no-underline transition-all duration-250 hover:bg-accent hover:text-white hover:-translate-y-0.5 dark:bg-white/10 dark:text-gray-300 dark:hover:bg-gray-200 dark:hover:text-black" href=https://linguista.bearblog.dev/ target=_blank rel=noopener aria-label="Bear Blog ʕ•ᴥ•ʔ">ʕ•ᴥ•ʔ</a></nav><div class="text-xs text-muted">© 2026 Linguista</div></div></div></aside><main class="w-full flex-grow mx-auto max-w-container px-4"><div class="grid grid-cols-1 lg:grid-cols-[200px_minmax(0,1fr)_220px] gap-8 py-8 pb-20 items-start max-w-7xl mx-auto"><div class="hidden lg:block" aria-hidden=true></div><article class="docs-content min-w-0"><div class=md-theme-amp-outer><div class=md-theme-amp><div class="text-muted text-sm mb-6"><span class=font-medium>Han ZL</span>
·
<span>2025-10-17</span></div><div class="link-card group relative my-3 w-full overflow-hidden rounded-xl border border-border bg-surface transition-shadow duration-300 hover:shadow-md" data-url=https://learn.deeplearning.ai/courses/agentic-ai/><a class="link-card__fallback block px-4 py-3 text-sm font-medium text-accent underline-offset-4 hover:underline" href=https://learn.deeplearning.ai/courses/agentic-ai/ target=_blank rel=noopener>https://learn.deeplearning.ai/courses/agentic-ai/</a></div><h1 id=module-4-practical-tips-for-building-agentic-ai>Module 4: Practical Tips for Building Agentic AI</h1><h2 id=41-evaluationsevals>4.1 Evaluations(evals)</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>In this module, I<span style=color:#e6db74>&#39;d like to share with you practical tips for building agentic AI workflows.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>04</span>
</span></span><span style=display:flex><span>I hope that these tips will enable you to be much more effective than the typical developer
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>at building these types of systems<span style=color:#f92672>.</span> I find that when developing an agentic AI system,
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>it<span style=color:#e6db74>&#39;s difficult to know in advance where it will work and where it won&#39;</span>t work so well,
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> thus where you should focus your effort<span style=color:#f92672>.</span> So very common advice is to try to build even a
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>27</span>
</span></span><span style=display:flex><span>quick <span style=color:#f92672>and</span> dirty system to start, so you can then try it out <span style=color:#f92672>and</span> look at it to see where it may <span style=color:#f92672>not</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>yet be working as well as you wish, to then have much more focused efforts to develop it even
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>further<span style=color:#f92672>.</span> In contrast, I find that it<span style=color:#e6db74>&#39;s sometimes less useful to sit around for too many weeks</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>46</span>
</span></span><span style=display:flex><span>theorizing <span style=color:#f92672>and</span> hypothesizing how to build it<span style=color:#f92672>.</span> It<span style=color:#e6db74>&#39;s often better to just build a quick system in a</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>safe, reasonable way that doesn<span style=color:#e6db74>&#39;t leak data, kind of do it in a responsible way, but just build</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>something quickly so you can look at it <span style=color:#f92672>and</span> then use that initial prototype to prioritize <span style=color:#f92672>and</span> try
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>03</span>
</span></span><span style=display:flex><span>further development<span style=color:#f92672>.</span> Let<span style=color:#e6db74>&#39;s start with an example of what might happen after you&#39;</span>ve built a prototype<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>I want to use as our first example the invoice processing workflow that you<span style=color:#e6db74>&#39;ve seen previously,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>with the task to extract four required fields <span style=color:#f92672>and</span> then to save it to a database record<span style=color:#f92672>.</span> After having
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>built such a system, one thing you might <span style=color:#66d9ef>do</span> is find a handful of invoices, maybe <span style=color:#ae81ff>10</span> <span style=color:#f92672>or</span> <span style=color:#ae81ff>20</span> invoices,
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> go through them <span style=color:#f92672>and</span> just take a look at their output <span style=color:#f92672>and</span> see what went well <span style=color:#f92672>and</span> <span style=color:#66d9ef>if</span> there were
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>33</span>
</span></span><span style=display:flex><span>any mistakes<span style=color:#f92672>.</span> So let<span style=color:#e6db74>&#39;s say you look through 20 invoices, you find that invoice 1 is fine, the</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span>output looks correct<span style=color:#f92672>.</span> For invoice <span style=color:#ae81ff>2</span>, maybe it confused the date of the invoice, that is when
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>was the invoice issued, with the due date of the invoice, <span style=color:#f92672>and</span> <span style=color:#f92672>in</span> this task we want to extract the
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>due date so we can issue payments on time<span style=color:#f92672>.</span> So then I might note down <span style=color:#f92672>in</span> a document <span style=color:#f92672>or</span> <span style=color:#f92672>in</span> a
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>spreadsheet that <span style=color:#66d9ef>for</span> invoice <span style=color:#ae81ff>2</span>, the dates were mixed up<span style=color:#f92672>.</span> Maybe invoice <span style=color:#ae81ff>3</span> was fine, invoice <span style=color:#ae81ff>4</span> was
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>fine, <span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> But as I go through this example, I find that there are quite a lot of examples where I had
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>03</span>
</span></span><span style=display:flex><span>mixed up the dates<span style=color:#f92672>.</span> So it is based on going through a number of examples like this, that <span style=color:#f92672>in</span> this <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>you might conclude that one common error mode is that it is struggling with the dates<span style=color:#f92672>.</span> In that <span style=color:#66d9ef>case</span>,
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span>one thing you might consider would be to of course figure out how to improve your system to make it
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>extract due dates better, but also maybe write an eval to measure the accuracy with which it is
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>29</span>
</span></span><span style=display:flex><span>extracting due dates<span style=color:#f92672>.</span> In comparison, <span style=color:#66d9ef>if</span> you had found that it was extracting the biller address
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>incorrectly, who knows, maybe you have billers with unusual sounding names <span style=color:#f92672>and</span> so maybe it
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>struggles with billers, <span style=color:#f92672>or</span> especially <span style=color:#66d9ef>if</span> you have international billers whose names may <span style=color:#f92672>not</span> even all
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>be English letters, then you might instead focus on building an eval <span style=color:#66d9ef>for</span> the biller address<span style=color:#f92672>.</span> So one
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>of the reasons why building a quick <span style=color:#f92672>and</span> dirty system <span style=color:#f92672>and</span> looking at the output is so helpful
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>is it even helps you decide what <span style=color:#66d9ef>do</span> you want to put the most effort into evaluating<span style=color:#f92672>.</span> Now <span style=color:#66d9ef>if</span> you<span style=color:#e6db74>&#39;ve</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>03</span>
</span></span><span style=display:flex><span>decided that you want to modify your system to improve the accuracy with which it is extracting
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span>the due date of the invoice, then to track progress it might be a good idea to create an
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>14</span>
</span></span><span style=display:flex><span>evaluation <span style=color:#f92672>or</span> an eval to measure the accuracy of date extraction<span style=color:#f92672>.</span> There are probably multiple ways
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>one might go about this, but let me share with you how I might go about this<span style=color:#f92672>.</span> To create a test set <span style=color:#f92672>or</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>an evaluation set, I might find <span style=color:#ae81ff>10</span> to <span style=color:#ae81ff>20</span> invoices <span style=color:#f92672>and</span> manually write down what is the due date<span style=color:#f92672>.</span> So
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>33</span>
</span></span><span style=display:flex><span>maybe one invoice has a due date of August <span style=color:#ae81ff>20</span>th, <span style=color:#ae81ff>2025</span>, <span style=color:#f92672>and</span> I write it down as a standard year, month,
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>39</span>
</span></span><span style=display:flex><span>date format<span style=color:#f92672>.</span> And then to make it easy to evaluate <span style=color:#f92672>in</span> code later, I would probably write the prompt
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>46</span>
</span></span><span style=display:flex><span>to the LLM to tell it to always format the due date <span style=color:#f92672>in</span> this year, month, date format<span style=color:#f92672>.</span> And with that,
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>I can then write code to extract out the one date that the LLM has output, which is the due date,
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>because that<span style=color:#e6db74>&#39;s the one day we care about. So this is a regular expression, pattern matching, you know,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span>four numbers of the year, two <span style=color:#66d9ef>for</span> the month, two <span style=color:#66d9ef>for</span> the date, <span style=color:#f92672>and</span> extract that out<span style=color:#f92672>.</span> And then I can
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>just write code to test <span style=color:#66d9ef>if</span> the extract date is equal to the actual date, that is the ground
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>truth annotation I had written down<span style=color:#f92672>.</span> So with an eval set of, say, <span style=color:#ae81ff>20</span> <span style=color:#f92672>or</span> so invoices, I build <span style=color:#f92672>and</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>make changes to see <span style=color:#66d9ef>if</span> the percentage of time that it gets the extracted date correct is hopefully
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>24</span>
</span></span><span style=display:flex><span>going up as I tweak my prompts <span style=color:#f92672>or</span> tweak other parts of my system<span style=color:#f92672>.</span> So just to summarize what
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>29</span>
</span></span><span style=display:flex><span>we<span style=color:#e6db74>&#39;ve seen so far, we build a system, then look at outputs to discover where it may be behaving in</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>an unsatisfactory way, such as due dates are wrong<span style=color:#f92672>.</span> Then to drive improvements to this important
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>output, put <span style=color:#f92672>in</span> place a small eval with, say, just <span style=color:#ae81ff>20</span> examples to help us track progress<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>46</span>
</span></span><span style=display:flex><span>And this lets me go back to two prompts, try different algorithms, <span style=color:#f92672>and</span> so on to see <span style=color:#66d9ef>if</span> I can
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>move up this metric of due date accuracy<span style=color:#f92672>.</span> So this is what improving an Agentic AI workflow will often
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>57</span>
</span></span><span style=display:flex><span>feel like<span style=color:#f92672>.</span> Look at the output, see what<span style=color:#e6db74>&#39;s wrong, then if you know how to fix it, just fix it. But</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> you need a longer process of improving it, then put <span style=color:#f92672>in</span> place an eval <span style=color:#f92672>and</span> use that to drive
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>further development<span style=color:#f92672>.</span> One other thing to consider is <span style=color:#66d9ef>if</span> after working <span style=color:#66d9ef>for</span> a <span style=color:#66d9ef>while</span>, <span style=color:#66d9ef>if</span> you think
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>those <span style=color:#ae81ff>20</span> examples you had initially aren<span style=color:#e6db74>&#39;t good enough, maybe they don&#39;</span>t cover all the cases you
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>want, <span style=color:#f92672>or</span> maybe <span style=color:#ae81ff>20</span> examples is just too few, then you can always add to the eval set over time to
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>make sure it better reflects your personal judgments on whether <span style=color:#f92672>or</span> <span style=color:#f92672>not</span> the system<span style=color:#e6db74>&#39;s performance is</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>sufficiently satisfactory<span style=color:#f92672>.</span> This is just one example<span style=color:#f92672>.</span> For the second example, let<span style=color:#e6db74>&#39;s look at</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>building a marketing copy assistant <span style=color:#66d9ef>for</span> writing captions <span style=color:#66d9ef>for</span> Instagram, where to keep things
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>succinct, let<span style=color:#e6db74>&#39;s say our marketing team tells us that they want captions that are at most 10 words</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>long<span style=color:#f92672>.</span> So we would have an image of a product, say a pair of sunglasses that we want to market,
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> then have a user query, like please write a caption to sell these sunglasses, <span style=color:#f92672>and</span> then have a
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>52</span>
</span></span><span style=display:flex><span>LLM, <span style=color:#f92672>or</span> large multimodal model, analyze the image <span style=color:#f92672>and</span> the query <span style=color:#f92672>and</span> generate a description of the
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>sunglasses<span style=color:#f92672>.</span> And there are lots of different ways that a marketing copy assistance may go wrong,
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>03</span>
</span></span><span style=display:flex><span>but let<span style=color:#e6db74>&#39;s say that you look at the output and you find that the copy or the text generated mostly</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>08</span>
</span></span><span style=display:flex><span>sounds okay, but maybe it<span style=color:#e6db74>&#39;s just sometimes too long. So for the sunglasses input, generate 17</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span>words, <span style=color:#66d9ef>if</span> you have a coffee machine, it<span style=color:#e6db74>&#39;s okay, stylish is okay, blue shirt, 14 words, blender,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span> words<span style=color:#f92672>.</span> So it looks like <span style=color:#f92672>in</span> this example, the LLM is having a hard time adhering to the length
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>24</span>
</span></span><span style=display:flex><span>guideline<span style=color:#f92672>.</span> So again, there are lots of things that could have gone wrong with a marketing copy
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>assistant<span style=color:#f92672>.</span> But <span style=color:#66d9ef>if</span> you find that it<span style=color:#e6db74>&#39;s struggling with the length of the output, they might build</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>33</span>
</span></span><span style=display:flex><span>an eval to track this so that you can make improvements <span style=color:#f92672>and</span> make sure it<span style=color:#e6db74>&#39;s getting better</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>39</span>
</span></span><span style=display:flex><span>at adhering to the length guideline<span style=color:#f92672>.</span> So to create an eval, to measure the text length, what you
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>44</span>
</span></span><span style=display:flex><span>might <span style=color:#66d9ef>do</span> is create a set of test stars, so mark a pair of sunglasses, a coffee machine, <span style=color:#f92672>and</span> so on,
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> maybe create <span style=color:#ae81ff>10</span> to <span style=color:#ae81ff>20</span> examples<span style=color:#f92672>.</span> Then you would run each of them through your system <span style=color:#f92672>and</span> write
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>code to measure the word count of the output<span style=color:#f92672>.</span> So this is Python code to measure the word count of a
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>02</span>
</span></span><span style=display:flex><span>piece of text<span style=color:#f92672>.</span> Then lastly, you would compare the length of the generated text to the <span style=color:#ae81ff>10</span> word target
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>limit<span style=color:#f92672>.</span> So <span style=color:#66d9ef>if</span> word count is equal to <span style=color:#ae81ff>10</span>, now I<span style=color:#e6db74>&#39;m correct, plus equals one. One difference between</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>this <span style=color:#f92672>and</span> the previous invoice processing example is that there is no per example ground truth<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>The target is just <span style=color:#ae81ff>10</span>, same <span style=color:#66d9ef>for</span> every single example<span style=color:#f92672>.</span> Whereas <span style=color:#f92672>in</span> contrast, <span style=color:#66d9ef>for</span> the invoice
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span>processing example, we had to generate a custom target label that is the correct due date of the
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>invoice, <span style=color:#f92672>and</span> we<span style=color:#e6db74>&#39;re testing the outputs against that per example ground truth. I know I used a</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span>very simple workflow <span style=color:#66d9ef>for</span> generating these captions, but these types of evals can be applied to much
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>more complex generation workflows as well<span style=color:#f92672>.</span> Let me touch on one final example <span style=color:#f92672>in</span> which we<span style=color:#e6db74>&#39;ll revisit</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>the research agents we<span style=color:#e6db74>&#39;ve been looking at. If you look at the output of the research agents on</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span>different input prompts, let<span style=color:#e6db74>&#39;s say that when you ask it to write an article on recent breakthroughs</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span><span style=color:#f92672>in</span> black hole science, you find that it missed some high profile result <span style=color:#f92672>and</span> a loss of news coverage<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>07</span>
</span></span><span style=display:flex><span>So this is an unsatisfactory result<span style=color:#f92672>.</span> Or <span style=color:#66d9ef>if</span> you asked it to research renting versus buying a
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>home <span style=color:#f92672>in</span> Seattle, well, it seems to <span style=color:#66d9ef>do</span> a good job<span style=color:#f92672>.</span> Or robotics <span style=color:#66d9ef>for</span> harvesting fruits<span style=color:#f92672>.</span> Well,
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>it didn<span style=color:#e6db74>&#39;t mention a leading equipment company. So based on this evaluation, it looks like</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>sometimes it misses a really important point that a human expert writer would have captured<span style=color:#f92672>.</span> So then
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>29</span>
</span></span><span style=display:flex><span>I would create an eval to measure how often it captures the most important points<span style=color:#f92672>.</span> For example,
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>you might come up with a number of example prompts on black holes, robotic harvesting,
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> And <span style=color:#66d9ef>for</span> each one, come up with, let<span style=color:#e6db74>&#39;s say, three to five gold standard discussion points</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> each of these topics<span style=color:#f92672>.</span> Notice that here we <span style=color:#66d9ef>do</span> have a per example annotation because the
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>gold standard talking points, that is the most important talking points, they are different <span style=color:#66d9ef>for</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>each of these examples<span style=color:#f92672>.</span> With these ground truth annotations, you might then use an LLMs judge to
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span>count how many of the gold standard talking points were mentioned<span style=color:#f92672>.</span> And so an example prompt might be
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>07</span>
</span></span><span style=display:flex><span>to say, determine how many of the five gold standard talking points are present <span style=color:#f92672>in</span> the
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>provided essay<span style=color:#f92672>.</span> You have the optional prompts, the essay text, gold standard points, <span style=color:#f92672>and</span> so on,
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> have it <span style=color:#66d9ef>return</span> a JSON object with two Gs that scores how many of the points, zero to five,
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span>to the score, as well as an explanation<span style=color:#f92672>.</span> And this allows you to get a score <span style=color:#66d9ef>for</span> each prompt <span style=color:#f92672>in</span> your
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>evaluation set<span style=color:#f92672>.</span> In this example, I<span style=color:#e6db74>&#39;m using LLM-as-a-judge to count how many of the talking points</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>were mentioned because there<span style=color:#e6db74>&#39;s so many different ways to talk about these talking points, and so a</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>regular expression <span style=color:#f92672>or</span> a code <span style=color:#66d9ef>for</span> simple pattern matching might <span style=color:#f92672>not</span> work that well, which is why
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>46</span>
</span></span><span style=display:flex><span>you might use an LLM<span style=color:#f92672>-</span>as<span style=color:#f92672>-</span>a<span style=color:#f92672>-</span>judge <span style=color:#f92672>and</span> treat this as a slightly more subjective evaluation <span style=color:#66d9ef>for</span> whether
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>52</span>
</span></span><span style=display:flex><span><span style=color:#f92672>or</span> <span style=color:#f92672>not</span>, say, event horizons were adequately mentioned<span style=color:#f92672>.</span> So this is your third example of how
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>57</span>
</span></span><span style=display:flex><span>you might build evals<span style=color:#f92672>.</span> In order to think about how to build evals <span style=color:#66d9ef>for</span> your application, the evals
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>04</span>
</span></span><span style=display:flex><span>you build will often have to reflect whatever you see <span style=color:#f92672>or</span> you<span style=color:#e6db74>&#39;re worried about going wrong in your</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>application<span style=color:#f92672>.</span> And it turns out that broadly, there are two axes of evaluation<span style=color:#f92672>.</span> On the top axis is the
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>way you evaluate the output<span style=color:#f92672>.</span> In some cases, you evaluate it by writing code with objective evals,
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> sometimes you use an LLM<span style=color:#f92672>-</span>as<span style=color:#f92672>-</span>a<span style=color:#f92672>-</span>judge <span style=color:#66d9ef>for</span> more subjective evals<span style=color:#f92672>.</span> On the other axis is whether
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>you have a per<span style=color:#f92672>-</span>example ground truth <span style=color:#f92672>or</span> <span style=color:#f92672>not</span><span style=color:#f92672>.</span> So <span style=color:#66d9ef>for</span> checking invoice date extraction, we were writing
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>code to evaluate <span style=color:#66d9ef>if</span> we got the actual date, <span style=color:#f92672>and</span> that had a per<span style=color:#f92672>-</span>example ground truth because each
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>invoice has a different actual date<span style=color:#f92672>.</span> But <span style=color:#f92672>in</span> the example where we checked marketing copy length,
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span>every example had a length limit of <span style=color:#ae81ff>10</span>, <span style=color:#f92672>and</span> so there was no per<span style=color:#f92672>-</span>example ground truth <span style=color:#66d9ef>for</span> that
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>02</span>
</span></span><span style=display:flex><span>problem<span style=color:#f92672>.</span> In contrast, <span style=color:#66d9ef>for</span> counting gold standard talking points, there was a per<span style=color:#f92672>-</span>example ground
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>07</span>
</span></span><span style=display:flex><span>truth because each article had different important talking points<span style=color:#f92672>.</span> But we used an LLM<span style=color:#f92672>-</span>as<span style=color:#f92672>-</span>a<span style=color:#f92672>-</span>judge to
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span>read the essay to see <span style=color:#66d9ef>if</span> those topics were adequately mentioned because there<span style=color:#e6db74>&#39;s so many</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span>different ways to mention the talking points<span style=color:#f92672>.</span> And the last of the four quadrants would be LLM<span style=color:#f92672>-</span>as<span style=color:#f92672>-</span>a<span style=color:#f92672>-</span>judge
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>with no per<span style=color:#f92672>-</span>example ground truth<span style=color:#f92672>.</span> And one place where we saw that was <span style=color:#66d9ef>if</span> you are grading
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>charts with a rubric<span style=color:#f92672>.</span> This is when we<span style=color:#e6db74>&#39;re looking at visualizing the coffee machine sales, and if</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>you ask it to create a chart according to a rubric, such as whether it<span style=color:#e6db74>&#39;s clear access labels and so on,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>there is the same rubric <span style=color:#66d9ef>for</span> every chart, <span style=color:#f92672>and</span> that would be using an LLM<span style=color:#f92672>-</span>as<span style=color:#f92672>-</span>a<span style=color:#f92672>-</span>judge but without a
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>46</span>
</span></span><span style=display:flex><span>per<span style=color:#f92672>-</span>example ground truth<span style=color:#f92672>.</span> So I find this two<span style=color:#f92672>-</span>by<span style=color:#f92672>-</span>two grid as maybe a useful way to think about the
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>different types of evals you might construct <span style=color:#66d9ef>for</span> your application<span style=color:#f92672>.</span> And by the way, these are
</span></span><span style=display:flex><span><span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>sometimes also called end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end evals because one end is the input end, which is the user query
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span>prompt, <span style=color:#f92672>and</span> the other end is the final output<span style=color:#f92672>.</span> And so all of these are evals <span style=color:#66d9ef>for</span> the entire end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>08</span>
</span></span><span style=display:flex><span>system<span style=color:#e6db74>&#39;s performance. So just to wrap up this video, I&#39;</span>d like to share a few final tips <span style=color:#66d9ef>for</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span>designing end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end evals<span style=color:#f92672>.</span> First, quick <span style=color:#f92672>and</span> dirty evals is fine to get started<span style=color:#f92672>.</span> I feel like I see
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>quite a lot of teams that are almost paralyzed because they think building evals is this
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>massive multi<span style=color:#f92672>-</span>week effort, <span style=color:#f92672>and</span> so they take longer than would be ideal to get started<span style=color:#f92672>.</span> But I think
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>just as you iterate on an agentic workflow <span style=color:#f92672>and</span> make it better over time, you should plan to
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>37</span>
</span></span><span style=display:flex><span>iterate on your evals as well<span style=color:#f92672>.</span> So <span style=color:#66d9ef>if</span> you put <span style=color:#f92672>in</span> place <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>15</span>, <span style=color:#ae81ff>20</span> examples as your first cut at
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>44</span>
</span></span><span style=display:flex><span>evals <span style=color:#f92672>and</span> write some code <span style=color:#f92672>or</span> try prompting an LLM<span style=color:#f92672>-</span>as<span style=color:#f92672>-</span>a<span style=color:#f92672>-</span>judge, just <span style=color:#66d9ef>do</span> something to start to get some
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>metrics that can complement the human eye at looking at the output, <span style=color:#f92672>and</span> then there<span style=color:#e6db74>&#39;s a blend</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>54</span>
</span></span><span style=display:flex><span>of the two that can drive your decision making<span style=color:#f92672>.</span> And as the evals become more sophisticated over
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>time, you can then shift more <span style=color:#f92672>and</span> more of your trust to the metric<span style=color:#f92672>-</span>based evals rather than
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>03</span>
</span></span><span style=display:flex><span>needing to read over hundreds of outputs every time you tweak a prompt somewhere<span style=color:#f92672>.</span> And as you
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>08</span>
</span></span><span style=display:flex><span>go through this process, you<span style=color:#e6db74>&#39;ll likely find ways to keep on improving your evals as well. So if you</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>had <span style=color:#ae81ff>20</span> examples to start, you may then run into places where your evals fail to capture your
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>judgment about what system is better<span style=color:#f92672>.</span> So maybe you update the system <span style=color:#f92672>and</span> you look at it <span style=color:#f92672>and</span> you feel
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>like this has got to work much better, but your eval fails to show the new system achieving a
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>higher score<span style=color:#f92672>.</span> If that<span style=color:#e6db74>&#39;s the case, that&#39;</span>s often an opportunity to go maybe collect a larger eval set
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span><span style=color:#f92672>or</span> change the way you evaluate the output to make it correspond better to your judgment as to what
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>system is actually working better<span style=color:#f92672>.</span> And so your evals will get better over time<span style=color:#f92672>.</span> And lastly,
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span><span style=color:#f92672>in</span> terms of using evals to gain inspiration as to what to work on next, a lot of agentic workflows
</span></span><span style=display:flex><span><span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>are being used to automate tasks that, say, humans can <span style=color:#66d9ef>do</span><span style=color:#f92672>.</span> And so I find <span style=color:#66d9ef>for</span> such applications,
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>02</span>
</span></span><span style=display:flex><span>I<span style=color:#e6db74>&#39;ll look for places where the performance is worse than that of an expert human, and that</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>often gives me inspiration <span style=color:#66d9ef>for</span> where to focus my efforts <span style=color:#f92672>or</span> what are the types of examples that I
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>maybe get my agentic workflow to work better than it is currently<span style=color:#f92672>.</span> So I hope that after you<span style=color:#e6db74>&#39;ve built</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>that quick <span style=color:#f92672>and</span> dirty system, you think about when it would make sense to start putting <span style=color:#f92672>in</span> some evals
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>to track the potentially problematic aspects of the system, <span style=color:#f92672>and</span> that that will then help you
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>drive improvements <span style=color:#f92672>in</span> the system<span style=color:#f92672>.</span> In addition to helping you drive improvements, it turns out that
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>there<span style=color:#e6db74>&#39;s a method of evals that helps you hone in of your entire agentic system. What are the</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>components most worth focusing your attention on<span style=color:#960050;background-color:#1e0010>?</span> Because agentic systems often have many pieces<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>47</span>
</span></span><span style=display:flex><span>So which piece is going to be most productive <span style=color:#66d9ef>for</span> you to spend time working to improve<span style=color:#960050;background-color:#1e0010>?</span> It turns
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>out being able to <span style=color:#66d9ef>do</span> this well is a really important skill <span style=color:#66d9ef>for</span> driving efficient development
</span></span><span style=display:flex><span><span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>of agentic workflows<span style=color:#f92672>.</span> In the next video, I<span style=color:#e6db74>&#39;d like to deep dive into this topic. So let&#39;</span>s go on to
</span></span><span style=display:flex><span><span style=color:#ae81ff>15</span>:<span style=color:#ae81ff>03</span>
</span></span><span style=display:flex><span>the next video<span style=color:#f92672>.</span>
</span></span></code></pre></div><h2 id=42-error-analysis-and-prioritizing-next-steps>4.2 Error analysis and prioritizing next steps</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>07</span>
</span></span><span style=display:flex><span>Let<span style=color:#e6db74>&#39;s say you&#39;</span>ve built an agentic workflow <span style=color:#f92672>and</span> <span style=color:#66d9ef>if</span> it<span style=color:#e6db74>&#39;s not yet working as well as you wish,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>04</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> this happens to me all the time by the way, I<span style=color:#e6db74>&#39;ll often build a quick and dirty system and</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span>it doesn<span style=color:#e6db74>&#39;t do as well as I wish it would, the question is where do you focus your efforts</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>14</span>
</span></span><span style=display:flex><span>to make it better<span style=color:#960050;background-color:#1e0010>?</span> Turns out agentic workflows have many different components <span style=color:#f92672>and</span> working on
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>some of the components could be much more fruitful than working on some other components<span style=color:#f92672>.</span> So your
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>skill at choosing where to focus your efforts makes a huge difference <span style=color:#f92672>in</span> the speed with which
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>you can make improvements to your system<span style=color:#f92672>.</span> And I found that one of the biggest predictors <span style=color:#66d9ef>for</span> how
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>efficient <span style=color:#f92672>and</span> how good a team is, is whether <span style=color:#f92672>or</span> <span style=color:#f92672>not</span> they<span style=color:#e6db74>&#39;re able to drive a disciplined error</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>41</span>
</span></span><span style=display:flex><span>analysis process to tell you where to focus your efforts<span style=color:#f92672>.</span> So this is an important skill<span style=color:#f92672>.</span> Let<span style=color:#e6db74>&#39;s take</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>47</span>
</span></span><span style=display:flex><span>a look at how to carry out error analysis<span style=color:#f92672>.</span> In the research agent example, we had carried out an error
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>54</span>
</span></span><span style=display:flex><span>analysis <span style=color:#f92672>in</span> the previous video <span style=color:#f92672>and</span> we saw that it was often missing key points <span style=color:#f92672>and</span> a human expert
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>would have made <span style=color:#f92672>in</span> writing essays on certain topics<span style=color:#f92672>.</span> So now you<span style=color:#e6db74>&#39;ve spotted this problem that</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>is sometimes missing key points, how <span style=color:#66d9ef>do</span> you know what to work on<span style=color:#960050;background-color:#1e0010>?</span> It turns out that of the many
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>different steps <span style=color:#f92672>in</span> this workflow, almost any of them could have contributed to this problem of
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span>missing key points<span style=color:#f92672>.</span> For example, maybe the first LLM was generating search terms that weren<span style=color:#e6db74>&#39;t great, so</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>it was just searching <span style=color:#66d9ef>for</span> the wrong things <span style=color:#f92672>and</span> did <span style=color:#f92672>not</span> discover the right articles<span style=color:#f92672>.</span> Or maybe use a
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>web search engine that just wasn<span style=color:#e6db74>&#39;t very good. There are multiple web search engines out there, in fact</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>33</span>
</span></span><span style=display:flex><span>actually quite a few that I tend to use <span style=color:#66d9ef>for</span> my own base applications <span style=color:#f92672>and</span> some are better than others<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>39</span>
</span></span><span style=display:flex><span>Or maybe web search was just fine but when we gave the list of web search results <span style=color:#f92672>in</span> LLM, maybe it
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>44</span>
</span></span><span style=display:flex><span>didn<span style=color:#e6db74>&#39;t do a good job choosing the best handful to download. Maybe web fetch has fewer problems in</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>this <span style=color:#66d9ef>case</span>, assuming you can fetch web pages accurately<span style=color:#f92672>.</span> But after dumping the web pages <span style=color:#f92672>in</span> LLM,
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>maybe the LLM is ignoring some of the points <span style=color:#f92672>in</span> the documents we had fetched<span style=color:#f92672>.</span> So it turns out that
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>02</span>
</span></span><span style=display:flex><span>there are teams that sometimes look at this <span style=color:#f92672>and</span> go by gut to pick one of these components to work on
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> sometimes that works <span style=color:#f92672>and</span> sometimes that leads to many months of work with very little progress
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span><span style=color:#f92672>in</span> the overall performance of the system<span style=color:#f92672>.</span> So rather than going by gut to decide which of these
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>many components to work on, I think it<span style=color:#e6db74>&#39;s much better to carry out an error analysis to better</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span>understand each step <span style=color:#f92672>in</span> the workflow<span style=color:#f92672>.</span> And <span style=color:#f92672>in</span> particular, I<span style=color:#e6db74>&#39;ll often examine the traces and that</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>means the intermediate output after each step <span style=color:#f92672>in</span> order to understand which component<span style=color:#e6db74>&#39;s performance</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span>is subpar, meaning say much worse than what a human expert would <span style=color:#66d9ef>do</span>, because that points to where
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>there may be room <span style=color:#66d9ef>for</span> security improvement<span style=color:#f92672>.</span> Let<span style=color:#e6db74>&#39;s look at an example. If we ask the research agent</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>to write an essay about recent news <span style=color:#f92672>in</span> black hole science, maybe the output search terms like these,
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>search <span style=color:#66d9ef>for</span> black hole theories Einstein, Event Horizon Telescope Radio, <span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> And I would
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span>then have a human expert look at these <span style=color:#f92672>and</span> see are these reasonable web search terms <span style=color:#66d9ef>for</span> writing
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>07</span>
</span></span><span style=display:flex><span>about recent discoveries <span style=color:#f92672>in</span> black hole science<span style=color:#f92672>.</span> And maybe <span style=color:#f92672>in</span> this <span style=color:#66d9ef>case</span> an expert says these web
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span>searches look okay, they<span style=color:#e6db74>&#39;re pretty similar to what I would do as a human. Then I look at the outputs of</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>the web search <span style=color:#f92672>and</span> look at the URLs returned<span style=color:#f92672>.</span> So web search would <span style=color:#66d9ef>return</span> many different web pages
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>27</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> maybe one web page returns is that an elementary school student claims to track a
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>30</span><span style=color:#f92672>-</span>year<span style=color:#f92672>-</span>old black hole mystery from Astro Kid News<span style=color:#f92672>.</span> And this doesn<span style=color:#e6db74>&#39;t look like the most rigorous</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span>peer<span style=color:#f92672>-</span>reviewed article<span style=color:#f92672>.</span> And maybe examining all of the articles that web search returns causes you to
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>44</span>
</span></span><span style=display:flex><span>conclude that it<span style=color:#e6db74>&#39;s returning too many blog or popular press types of articles and not enough</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>scientific articles to write a research report of the quality that you are looking <span style=color:#66d9ef>for</span><span style=color:#f92672>.</span> It<span style=color:#e6db74>&#39;d be good</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>to just look through the outputs of the other steps as well<span style=color:#f92672>.</span> Maybe the LLM finds the best five
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>sources you can, you end up with Astro Kid News, SpaceBot <span style=color:#ae81ff>2000</span>, Space Fun News <span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> And it is
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>by looking at these intermediate outputs that you can then try to get a sense of the quality of the
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>output of each of these steps<span style=color:#f92672>.</span> To introduce some terminology, the overall set of outputs of all of
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>the intermediate steps is often called the trace of a run of this agent<span style=color:#f92672>.</span> And then some terminology
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>24</span>
</span></span><span style=display:flex><span>you see <span style=color:#f92672>in</span> other sources as well is the output of a single step is sometimes called a span<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>This is terminology from the computer observability literature where people try to
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>figure out what computers are doing<span style=color:#f92672>.</span> And <span style=color:#f92672>in</span> this course, I use the word trace quite a bit<span style=color:#f92672>.</span> I<span style=color:#e6db74>&#39;ll use</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>41</span>
</span></span><span style=display:flex><span>the word span a little bit less, but you may see both of these terms on the internet<span style=color:#f92672>.</span> So by reading
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>46</span>
</span></span><span style=display:flex><span>the traces, you start to get an informal sense of where might be the most problematic components<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>52</span>
</span></span><span style=display:flex><span>In order to <span style=color:#66d9ef>do</span> this <span style=color:#f92672>in</span> a more systematic way, it turns out to be useful to focus your attention
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>57</span>
</span></span><span style=display:flex><span>on the cases that the system is doing poorly on<span style=color:#f92672>.</span> Maybe you write some essays just fine <span style=color:#f92672>and</span> the
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>02</span>
</span></span><span style=display:flex><span>output is completely satisfactory<span style=color:#f92672>.</span> So I would put those aside <span style=color:#f92672>and</span> try to come up with a set of
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>examples where <span style=color:#66d9ef>for</span> whatever reason, the final output of your research agent is <span style=color:#f92672>not</span> quite
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>satisfactory <span style=color:#f92672>and</span> just focus on those examples<span style=color:#f92672>.</span> So this is one of the reasons we call error analysis
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span>because we want to focus on the cases where the system made an error <span style=color:#f92672>and</span> we want to go through
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>to figure out which components were most responsible <span style=color:#66d9ef>for</span> the error <span style=color:#f92672>in</span> the research agent
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>output<span style=color:#f92672>.</span> In order to make this more rigorous, rather than reading <span style=color:#f92672>and</span> getting an informal sense,
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>33</span>
</span></span><span style=display:flex><span>you might actually build up a spreadsheet to more explicitly count up where the errors are<span style=color:#f92672>.</span> And by
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>error, I mean when a step outputs something that performs significantly worse than maybe what a
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>47</span>
</span></span><span style=display:flex><span>human expert would have given a similar input as that component<span style=color:#f92672>.</span> So I<span style=color:#e6db74>&#39;ll often do this myself in a</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>52</span>
</span></span><span style=display:flex><span>spreadsheet<span style=color:#f92672>.</span> So I might build a spreadsheet like this<span style=color:#f92672>.</span> And so <span style=color:#66d9ef>for</span> the first query, I<span style=color:#e6db74>&#39;ll look at</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>57</span>
</span></span><span style=display:flex><span>recent developments <span style=color:#f92672>in</span> black hole science<span style=color:#f92672>.</span> And I see that the search results has too many blog
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span>posts, popular press articles, <span style=color:#f92672>not</span> enough scientific papers<span style=color:#f92672>.</span> And then based on this,
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>07</span>
</span></span><span style=display:flex><span>it is true that the five best sources aren<span style=color:#e6db74>&#39;t great. But here I won&#39;</span>t say that the five best sources
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>did a bad job because <span style=color:#66d9ef>if</span> the inputs to LLM <span style=color:#66d9ef>for</span> selecting the five best sources were all
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>non<span style=color:#f92672>-</span>rigorous articles, then I can<span style=color:#e6db74>&#39;t blame this picking the five best sources for not picking</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>better articles because it did the best it could have <span style=color:#f92672>or</span> as what did nearly as well as any human
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>might have given the same selection to choose from<span style=color:#f92672>.</span> And then you might go through this <span style=color:#66d9ef>for</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>different prompts<span style=color:#f92672>.</span> Renting versus buying <span style=color:#f92672>in</span> Seattle<span style=color:#f92672>.</span> Maybe it missed a well<span style=color:#f92672>-</span>known blog<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>37</span>
</span></span><span style=display:flex><span>Robotics <span style=color:#66d9ef>for</span> harvesting fruit<span style=color:#f92672>.</span> Maybe <span style=color:#f92672>in</span> this <span style=color:#66d9ef>case</span>, we look at it <span style=color:#f92672>and</span> say,
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>41</span>
</span></span><span style=display:flex><span>oh, the search terms are too generic <span style=color:#f92672>and</span> the search results also weren<span style=color:#e6db74>&#39;t good and so on.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>And then based on this, I would count up <span style=color:#f92672>in</span> my spreadsheet how often I observe errors <span style=color:#f92672>in</span> the
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>52</span>
</span></span><span style=display:flex><span>different components<span style=color:#f92672>.</span> So <span style=color:#f92672>in</span> this example, I<span style=color:#e6db74>&#39;m dissatisfied with the search terms 5</span><span style=color:#e6db74>% o</span><span style=color:#e6db74>f the time,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>57</span>
</span></span><span style=display:flex><span>but I<span style=color:#e6db74>&#39;m dissatisfied with the search results 45</span><span style=color:#e6db74>% o</span><span style=color:#e6db74>f the time. And if I actually see this,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span>I might just take a careful look at the search terms to make sure that the search terms really
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>were okay <span style=color:#f92672>and</span> that poor choice of search terms were <span style=color:#f92672>not</span> what led to poor search results<span style=color:#f92672>.</span> But
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> I really think the search terms are fine, but the search results are <span style=color:#f92672>not</span>, then I would take a
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>14</span>
</span></span><span style=display:flex><span>careful look at the web search engine I<span style=color:#e6db74>&#39;m using and if there are any parameters I can tune to make</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>it bring back more relevant <span style=color:#f92672>or</span> higher quality results<span style=color:#f92672>.</span> There<span style=color:#e6db74>&#39;s this type of analysis that</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>tells me <span style=color:#f92672>in</span> this example that maybe I really should focus my attention on fixing the search
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>results <span style=color:#f92672>and</span> <span style=color:#f92672>not</span> on the other components of this agentic workflow<span style=color:#f92672>.</span> So to wrap up this video,
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>I find that it<span style=color:#e6db74>&#39;s useful to develop a habit of looking at traces. After you build an agentic</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>workflow, go ahead <span style=color:#f92672>and</span> look at the intermediate outputs to get a feel <span style=color:#66d9ef>for</span> what it is actually
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>44</span>
</span></span><span style=display:flex><span>doing at every step so that you can better understand <span style=color:#66d9ef>if</span> different steps are performing
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>better <span style=color:#f92672>or</span> worse<span style=color:#f92672>.</span> And a more systematic error analysis, maybe done with a spreadsheet,
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>54</span>
</span></span><span style=display:flex><span>can let you gather statistics <span style=color:#f92672>or</span> count up which component performs poorly most frequently<span style=color:#f92672>.</span> And
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>59</span>
</span></span><span style=display:flex><span>so by looking at what components are doing poorly, as well as where I have ideas <span style=color:#66d9ef>for</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>efficiently improving different components, then that will let you prioritize what component to
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>work on<span style=color:#f92672>.</span> So maybe a component is problematic, but I don<span style=color:#e6db74>&#39;t have any ideas for improving it,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>so that would suggest maybe <span style=color:#f92672>not</span> prioritizing that as high<span style=color:#f92672>.</span> But <span style=color:#66d9ef>if</span> there is a component that is
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>generating a lot of errors, <span style=color:#f92672>and</span> <span style=color:#66d9ef>if</span> I have ideas how to improve that, then that would be a good
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>reason to prioritize working on that component<span style=color:#f92672>.</span> And I just want to emphasize that error analysis
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>31</span>
</span></span><span style=display:flex><span>is a very helpful output <span style=color:#66d9ef>for</span> you to decide where to focus your efforts, because <span style=color:#f92672>in</span> any complex
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>37</span>
</span></span><span style=display:flex><span>system, there are just so many things you could work on<span style=color:#f92672>.</span> It<span style=color:#e6db74>&#39;s too easy to pick something to work</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span>on <span style=color:#f92672>and</span> work on it <span style=color:#66d9ef>for</span> weeks <span style=color:#f92672>or</span> even months, only to discover later that that did <span style=color:#f92672>not</span> result <span style=color:#f92672>in</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>47</span>
</span></span><span style=display:flex><span>improved performance <span style=color:#f92672>in</span> your overall system<span style=color:#f92672>.</span> And so using error analysis to decide where to focus
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>52</span>
</span></span><span style=display:flex><span>your effort turns out to be incredibly useful <span style=color:#66d9ef>for</span> improving your efficiency<span style=color:#f92672>.</span> In this video,
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>we went over error analysis with the research agent example, but I think error analysis is
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>04</span>
</span></span><span style=display:flex><span>such an important topic, I want to go over some additional examples with you<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>08</span>
</span></span><span style=display:flex><span>So let<span style=color:#e6db74>&#39;s go on to the next video, where we&#39;</span>ll look at more examples of error analysis<span style=color:#f92672>.</span>
</span></span></code></pre></div><h2 id=43-more-error-analysis-examples>4.3 More error analysis examples</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-fallback data-lang=fallback><span style=display:flex><span>0:05
</span></span><span style=display:flex><span>I found that for many developers, it&#39;s only by seeing multiple examples that you can then
</span></span><span style=display:flex><span>0:05
</span></span><span style=display:flex><span>get practice and hone your intuitions about how to carry out error analysis.
</span></span><span style=display:flex><span>0:09
</span></span><span style=display:flex><span>So let&#39;s take a look at two more examples, and we&#39;ll look at invoice processing
</span></span><span style=display:flex><span>0:14
</span></span><span style=display:flex><span>and responding to customer emails.
</span></span><span style=display:flex><span>0:16
</span></span><span style=display:flex><span>Here&#39;s the workflow that we had for invoice processing, where we had a clear process to
</span></span><span style=display:flex><span>0:21
</span></span><span style=display:flex><span>follow an agentic workflow of identifying the four required fields and then recording
</span></span><span style=display:flex><span>0:27
</span></span><span style=display:flex><span>them in a database.
</span></span><span style=display:flex><span>0:28
</span></span><span style=display:flex><span>In the example from the first video of this module, we said that the system was often
</span></span><span style=display:flex><span>0:32
</span></span><span style=display:flex><span>making a mistake in the due date of the invoice.
</span></span><span style=display:flex><span>0:36
</span></span><span style=display:flex><span>So we can carry out error analysis to try to figure out which of the components it may
</span></span><span style=display:flex><span>0:40
</span></span><span style=display:flex><span>have been due to.
</span></span><span style=display:flex><span>0:41
</span></span><span style=display:flex><span>So for example, did the PDF to text make a mistake, or did the LLM extract the wrong date
</span></span><span style=display:flex><span>0:47
</span></span><span style=display:flex><span>out of whatever was output from the PDF to text component?
</span></span><span style=display:flex><span>0:51
</span></span><span style=display:flex><span>To carry out an error analysis, I would try to find a number of examples where the data
</span></span><span style=display:flex><span>0:56
</span></span><span style=display:flex><span>extracted is incorrect.
</span></span><span style=display:flex><span>0:58
</span></span><span style=display:flex><span>So same as the last video, it&#39;s useful to focus on the examples where the performance
</span></span><span style=display:flex><span>1:02
</span></span><span style=display:flex><span>is subpar to try to figure out what went wrong with those examples.
</span></span><span style=display:flex><span>1:05
</span></span><span style=display:flex><span>So ignore the examples that got the date right, but try to find somewhere between 10 and 100
</span></span><span style=display:flex><span>1:10
</span></span><span style=display:flex><span>invoices where it got the date wrong.
</span></span><span style=display:flex><span>1:12
</span></span><span style=display:flex><span>And then I would look through to try to figure out was the cause of the problem that PDF
</span></span><span style=display:flex><span>1:18
</span></span><span style=display:flex><span>to text got the date wrong, or was it that the LLM, given the PDF to text output, pulled
</span></span><span style=display:flex><span>1:24
</span></span><span style=display:flex><span>out the wrong date.
</span></span><span style=display:flex><span>1:25
</span></span><span style=display:flex><span>And so you might build up a little spreadsheet like this and go through 20 invoices and just
</span></span><span style=display:flex><span>1:30
</span></span><span style=display:flex><span>count up how often did PDF to text extract the dates or the text incorrectly so that
</span></span><span style=display:flex><span>1:35
</span></span><span style=display:flex><span>even a human couldn&#39;t tell what is the due date versus the PDF to text look good enough,
</span></span><span style=display:flex><span>1:40
</span></span><span style=display:flex><span>but the LLM, when asked to pull the dates, somehow pulled out the wrong date, like maybe
</span></span><span style=display:flex><span>1:44
</span></span><span style=display:flex><span>identifying the invoice date rather than the due date of the invoice.
</span></span><span style=display:flex><span>1:48
</span></span><span style=display:flex><span>So in this example, it looks like the LLM data extraction was responsible for a lot
</span></span><span style=display:flex><span>1:52
</span></span><span style=display:flex><span>more errors.
</span></span><span style=display:flex><span>1:53
</span></span><span style=display:flex><span>So this tells me that maybe I should focus my efforts on the LLM data extraction component
</span></span><span style=display:flex><span>1:57
</span></span><span style=display:flex><span>rather than on PDF to text.
</span></span><span style=display:flex><span>1:59
</span></span><span style=display:flex><span>And this is important because if not for this error analysis, I can imagine some teams spending
</span></span><span style=display:flex><span>2:05
</span></span><span style=display:flex><span>weeks or months trying to tune the PDF to text only to discover after that time that
</span></span><span style=display:flex><span>2:10
</span></span><span style=display:flex><span>it did not make much of an impact to the final system&#39;s performance.
</span></span><span style=display:flex><span>2:14
</span></span><span style=display:flex><span>Oh, and by the way, these percentages here at the bottom can add up not to 100% because
</span></span><span style=display:flex><span>2:20
</span></span><span style=display:flex><span>these errors are not mutually exclusive.
</span></span><span style=display:flex><span>2:22
</span></span><span style=display:flex><span>To look at one last example, let&#39;s go back to the agentic workflow for responding to
</span></span><span style=display:flex><span>2:27
</span></span><span style=display:flex><span>customer emails, where the LLM, given a customer email like this, asking for an order, would
</span></span><span style=display:flex><span>2:34
</span></span><span style=display:flex><span>pull up the order details, fetch the information from the database, then draft a response for
</span></span><span style=display:flex><span>2:39
</span></span><span style=display:flex><span>a human to review.
</span></span><span style=display:flex><span>2:40
</span></span><span style=display:flex><span>So again, I would find a number of examples where, for whatever reason, the final output
</span></span><span style=display:flex><span>2:46
</span></span><span style=display:flex><span>is unsatisfactory and then try to figure out what had gone wrong.
</span></span><span style=display:flex><span>2:50
</span></span><span style=display:flex><span>And so some things that could go wrong.
</span></span><span style=display:flex><span>2:52
</span></span><span style=display:flex><span>Maybe the LLM had written an incorrect database query.
</span></span><span style=display:flex><span>2:56
</span></span><span style=display:flex><span>So when the query was sent to the database, it just did not successfully pull up the customer
</span></span><span style=display:flex><span>3:01
</span></span><span style=display:flex><span>info.
</span></span><span style=display:flex><span>3:02
</span></span><span style=display:flex><span>Or maybe the database has corrupted data.
</span></span><span style=display:flex><span>3:05
</span></span><span style=display:flex><span>So even though the LLM wrote a completely appropriate database query, maybe in SQL or some other
</span></span><span style=display:flex><span>3:10
</span></span><span style=display:flex><span>query language, the database did not have the correct information.
</span></span><span style=display:flex><span>3:13
</span></span><span style=display:flex><span>Or maybe given the correct information about the customer order, the LLM wrote an email
</span></span><span style=display:flex><span>3:17
</span></span><span style=display:flex><span>that was somehow not quite right.
</span></span><span style=display:flex><span>3:20
</span></span><span style=display:flex><span>So again, I would look through a handful of emails where the final output was unsatisfactory
</span></span><span style=display:flex><span>3:25
</span></span><span style=display:flex><span>and try to figure out what had gone wrong.
</span></span><span style=display:flex><span>3:26
</span></span><span style=display:flex><span>So maybe in email one, we find that the LLM had asked for the wrong table in the query,
</span></span><span style=display:flex><span>3:31
</span></span><span style=display:flex><span>just asked for the wrong data in the way it created the database.
</span></span><span style=display:flex><span>3:34
</span></span><span style=display:flex><span>In email two, maybe I find that the database actually has an error.
</span></span><span style=display:flex><span>3:38
</span></span><span style=display:flex><span>And maybe given that input, the LLM somehow wrote a subalternate email as well, and so
</span></span><span style=display:flex><span>3:44
</span></span><span style=display:flex><span>on.
</span></span><span style=display:flex><span>3:44
</span></span><span style=display:flex><span>And in this example, after going through many emails, maybe I find that the most common
</span></span><span style=display:flex><span>3:50
</span></span><span style=display:flex><span>error is in the way the LLM is writing a database query, say a SQL query, in order to fetch
</span></span><span style=display:flex><span>3:57
</span></span><span style=display:flex><span>the relevant information.
</span></span><span style=display:flex><span>3:58
</span></span><span style=display:flex><span>Whereas the database is mostly correct, although there&#39;s a little bit of data errors there.
</span></span><span style=display:flex><span>4:02
</span></span><span style=display:flex><span>And the way the LLM writes the email also has some errors.
</span></span><span style=display:flex><span>4:05
</span></span><span style=display:flex><span>Maybe it doesn&#39;t quite where they write 30% of the time.
</span></span><span style=display:flex><span>4:08
</span></span><span style=display:flex><span>And this tells me that it&#39;d be most worthwhile maybe for me to improve the way the LLM is
</span></span><span style=display:flex><span>4:13
</span></span><span style=display:flex><span>writing queries.
</span></span><span style=display:flex><span>4:14
</span></span><span style=display:flex><span>Second most important would be maybe improve the prompting for how I write the final email.
</span></span><span style=display:flex><span>4:20
</span></span><span style=display:flex><span>That an analysis like this can tell you that 75% of the errors, maybe the system gets lots
</span></span><span style=display:flex><span>4:25
</span></span><span style=display:flex><span>of things right, but of all the things it gets not quite right, 75% of the problems
</span></span><span style=display:flex><span>4:29
</span></span><span style=display:flex><span>is from the database query.
</span></span><span style=display:flex><span>4:31
</span></span><span style=display:flex><span>This is incredibly helpful information to tell you where to focus your efforts.
</span></span><span style=display:flex><span>4:36
</span></span><span style=display:flex><span>When I&#39;m developing Agentic AI workflows, I&#39;ll often use this type of error analysis
</span></span><span style=display:flex><span>4:40
</span></span><span style=display:flex><span>to tell me where to focus my attention in terms of what to work on next.
</span></span><span style=display:flex><span>4:45
</span></span><span style=display:flex><span>When you&#39;ve made that determination, it turns out that to complement the end-to-end
</span></span><span style=display:flex><span>4:49
</span></span><span style=display:flex><span>evals that we spoke about earlier in this module, it&#39;s often useful to evaluate not
</span></span><span style=display:flex><span>4:54
</span></span><span style=display:flex><span>just the entire end-to-end system, but also individual components, because that can make
</span></span><span style=display:flex><span>4:59
</span></span><span style=display:flex><span>you more efficient in how you improve the one component that, say, error analysis has
</span></span><span style=display:flex><span>5:05
</span></span><span style=display:flex><span>caused you to decide to focus your attention on.
</span></span><span style=display:flex><span>5:08
</span></span><span style=display:flex><span>So let&#39;s go on to the next video to learn about component-level evals.
</span></span></code></pre></div><h2 id=44-component-level-evaluations>4.4 Component-level evaluations</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>04</span>
</span></span><span style=display:flex><span>Let<span style=color:#e6db74>&#39;s take a look at how to build and use component-level evals.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>04</span>
</span></span><span style=display:flex><span>In our example of a research agent, we said that the research agent was sometimes missing
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span>key points<span style=color:#f92672>.</span> But <span style=color:#66d9ef>if</span> the problem was web search, <span style=color:#66d9ef>if</span> every time we change the web search engine,
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>we need to rerun the entire workflow, that can give us a good metric <span style=color:#66d9ef>for</span> performance,
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>but that type of eval is expensive<span style=color:#f92672>.</span> Moreover, this is a pretty complicated workflow,
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span>so even <span style=color:#66d9ef>if</span> web search made things a little bit better, maybe noise introduced by the randomness
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>31</span>
</span></span><span style=display:flex><span>of other components would make it harder to see little improvements to the web search quality<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span>So as an alternative to only using end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end evals, what I would <span style=color:#66d9ef>do</span> is consider building an
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>eval just to measure the quality of the web search component<span style=color:#f92672>.</span> For example, to measure the
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>quality of the web search results, you might create a list of gold standard web resources<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>So <span style=color:#66d9ef>for</span> a handful of queries, have an expert say, these are the most authoritative sources that <span style=color:#66d9ef>if</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>someone was searching the internet, they really should find these web pages <span style=color:#f92672>or</span> any of these web
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>03</span>
</span></span><span style=display:flex><span>pages would be good<span style=color:#f92672>.</span> And then you can write code to capture how many of the web search outputs
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span>correspond to the gold standard web resources<span style=color:#f92672>.</span> The standard metrics from information retrieval,
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>the F1 score, don<span style=color:#e6db74>&#39;t worry about the details if you don&#39;</span>t know what that means, but there are
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>standard metrics that allow you to measure of a list of web pages returned by web search,
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>how much does that overlap with what an expert determined are the gold standard web resources<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>29</span>
</span></span><span style=display:flex><span>With this, you<span style=color:#e6db74>&#39;re now armed with a way to evaluate just the quality of the web search component.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>And so as you vary the parameters <span style=color:#f92672>or</span> hyperparameters of how you care about web search,
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>such as <span style=color:#66d9ef>if</span> you swap <span style=color:#f92672>in</span> <span style=color:#f92672>and</span> out different web search engines, so maybe try Google <span style=color:#f92672>and</span> Bing
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> Dr<span style=color:#f92672>.</span> Go <span style=color:#f92672>and</span> Tivoli <span style=color:#f92672>and</span> U<span style=color:#f92672>.</span>com <span style=color:#f92672>and</span> others, <span style=color:#f92672>or</span> as you vary the number of results <span style=color:#f92672>or</span> as you vary
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>the date range that you ask the web search engines to search over, this can very quickly let you
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>54</span>
</span></span><span style=display:flex><span>judge <span style=color:#66d9ef>if</span> the quality of the web search component is going up <span style=color:#f92672>and</span> does make more incremental
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span>improvements<span style=color:#f92672>.</span> And then of course, before you call the job done, it would be good to run an
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end eval to make sure that after tuning your web search system <span style=color:#66d9ef>for</span> a <span style=color:#66d9ef>while</span> that you are
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>improving the overall system performance<span style=color:#f92672>.</span> But during that process of tuning these hyperparameters
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>one at a time, you could <span style=color:#66d9ef>do</span> so much more efficiently by evaluating just one component
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>rather than needing to rerun end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end evals every single time<span style=color:#f92672>.</span> So component level evals can
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>27</span>
</span></span><span style=display:flex><span>provide a clearer <span style=color:#66d9ef>signal</span> <span style=color:#66d9ef>for</span> specific errors<span style=color:#f92672>.</span> It actually lets you know <span style=color:#66d9ef>if</span> you<span style=color:#e6db74>&#39;re improving</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>the web search component <span style=color:#f92672>or</span> whatever component you<span style=color:#e6db74>&#39;re working on and avoid the noise in the</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>37</span>
</span></span><span style=display:flex><span>complexity of the overall end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end system<span style=color:#f92672>.</span> And <span style=color:#66d9ef>if</span> you<span style=color:#e6db74>&#39;re working on a project where you have</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>different teams focused on different components, it can also be more efficient <span style=color:#66d9ef>for</span> one team to just
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>have his own very clear metric to optimize without needing to worry about all of the other components<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>And so this lets the team work on a smaller, more targeted problem faster<span style=color:#f92672>.</span> So when you<span style=color:#e6db74>&#39;ve decided to</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>work on improving a component, consider <span style=color:#66d9ef>if</span> it<span style=color:#e6db74>&#39;s worth putting in place a component-wise eval and</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> that will let you go faster on improving the performance of that component<span style=color:#f92672>.</span> Now the one thing
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>you may be wondering is, <span style=color:#66d9ef>if</span> you decided to improve a component, how <span style=color:#66d9ef>do</span> you actually go about making
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>that one component work better<span style=color:#960050;background-color:#1e0010>?</span> Let<span style=color:#e6db74>&#39;s take a look at some examples of that in the next video.</span>
</span></span></code></pre></div><h2 id=45-how-to-address-problems-you-identify>4.5 How to address problems you identify</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>An agentic workflow may comprise many different types of components, <span style=color:#f92672>and</span> so your tools <span style=color:#66d9ef>for</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>improving different components will be pretty different<span style=color:#f92672>.</span> But I<span style=color:#e6db74>&#39;d like to share with you some</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span>general patterns I<span style=color:#e6db74>&#39;ve seen. Some components in your agentic workflow will be non-LLM-based,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>so it may be something like a web search engine <span style=color:#f92672>or</span> a text retrieval component,
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> that<span style=color:#e6db74>&#39;s part of your RAG or Retrieval Augmented Generating System, something for code execution,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>24</span>
</span></span><span style=display:flex><span><span style=color:#f92672>or</span> maybe with a separately trained machine learning model, maybe <span style=color:#66d9ef>for</span> speech recognition
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span><span style=color:#f92672>or</span> detecting people <span style=color:#f92672>in</span> pictures, <span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> So sometimes these non<span style=color:#f92672>-</span>LLM<span style=color:#f92672>-</span>based components will
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>have parameters <span style=color:#f92672>or</span> hyperparameters that you can tune<span style=color:#f92672>.</span> So <span style=color:#66d9ef>for</span> web search, you can tune things like
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>39</span>
</span></span><span style=display:flex><span>the number of results <span style=color:#f92672>or</span> maybe the date range that you ask the web search engine to consider<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>44</span>
</span></span><span style=display:flex><span>For a RAG text retrieval component, you might change the similarity threshold that determines
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>what pieces of text it considers similar, <span style=color:#f92672>or</span> the chunk size<span style=color:#f92672>.</span> Often RAG systems will take text <span style=color:#f92672>and</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span>chop it up into smaller chunks <span style=color:#66d9ef>for</span> matching, so the main hyperparameters you could use<span style=color:#f92672>.</span> Or <span style=color:#66d9ef>for</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>people detection, you might change the detection threshold, so how sensitive it is <span style=color:#f92672>and</span> how likely
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>it is to declare this found a person, <span style=color:#f92672>and</span> this will trade off the false positives <span style=color:#f92672>and</span> false
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>08</span>
</span></span><span style=display:flex><span>negatives<span style=color:#f92672>.</span> If they follow all the details of the hyperparameters I just discussed, don<span style=color:#e6db74>&#39;t worry</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>about it<span style=color:#f92672>.</span> The details aren<span style=color:#e6db74>&#39;t that important, but often the components were parameters that</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>you can tune<span style=color:#f92672>.</span> And then of course, you can also try to replace the component<span style=color:#f92672>.</span> I <span style=color:#66d9ef>do</span> this a lot
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span><span style=color:#f92672>in</span> my agentic workflows, where I<span style=color:#e6db74>&#39;ll swap in different RAG search engines or swap in different</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span>RAG providers <span style=color:#f92672>and</span> so on, just to see <span style=color:#66d9ef>if</span> some other provider might work better<span style=color:#f92672>.</span> Because of the
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>diversity of non<span style=color:#f92672>-</span>LLM<span style=color:#f92672>-</span>based components, I think the techniques <span style=color:#66d9ef>for</span> how to improve it will be
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>37</span>
</span></span><span style=display:flex><span>more diverse <span style=color:#f92672>and</span> dependent on exactly what that component is doing<span style=color:#f92672>.</span> For an LLM<span style=color:#f92672>-</span>based component,
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>here are some options you might consider<span style=color:#f92672>.</span> One would be to try to improve your prompts<span style=color:#f92672>.</span> So maybe
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>try to add more explicit instructions<span style=color:#f92672>.</span> Or <span style=color:#66d9ef>if</span> you know what few<span style=color:#f92672>-</span>shot prompting is, that refers to
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span>adding one <span style=color:#f92672>or</span> more concrete examples of an example of an input <span style=color:#f92672>and</span> a desired output<span style=color:#f92672>.</span> And so few<span style=color:#f92672>-</span>shot
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>01</span>
</span></span><span style=display:flex><span>prompting, which you can learn about from some deep learning short courses as well, is a technique
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>that can give your LLM some examples to hopefully help it get better performing outputs written<span style=color:#f92672>.</span> Or
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>you can also try a different LLM<span style=color:#f92672>.</span> So with AI Suite <span style=color:#f92672>or</span> other tools, it could be pretty easy to try
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>multiple LLMs <span style=color:#f92672>and</span> then you can use evals to pick the best model <span style=color:#66d9ef>for</span> your application<span style=color:#f92672>.</span> Sometimes,
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> a single step is too complex <span style=color:#66d9ef>for</span> one LLM to <span style=color:#66d9ef>do</span>, you can consider <span style=color:#66d9ef>if</span> you want to decompose
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>the task into smaller steps<span style=color:#f92672>.</span> Or maybe decompose it into a generation step <span style=color:#f92672>and</span> then a reflection
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>step<span style=color:#f92672>.</span> But more generally, <span style=color:#66d9ef>if</span> you have instructions that are very complex all within one step, maybe a
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>single LLM has a hard time following all those instructions<span style=color:#f92672>.</span> And you can <span style=color:#66d9ef>break</span> the task down
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>to smaller steps that may be easier <span style=color:#66d9ef>for</span>, say, two <span style=color:#f92672>or</span> three calls <span style=color:#f92672>in</span> a row to carry out accurately<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>And lastly, something to try when the other methods aren<span style=color:#e6db74>&#39;t working well enough is to consider</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>fine<span style=color:#f92672>-</span>tuning a model<span style=color:#f92672>.</span> This tends to be quite a bit more complex than the other options, so it can be
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>02</span>
</span></span><span style=display:flex><span>quite a bit more expensive as well <span style=color:#f92672>in</span> terms of developer time to implement<span style=color:#f92672>.</span> But <span style=color:#66d9ef>if</span> you have some
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>data that you can use to fine<span style=color:#f92672>-</span>tune an LLM on, that could give you much better performance than
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>14</span>
</span></span><span style=display:flex><span>prompting alone<span style=color:#f92672>.</span> So I tend <span style=color:#f92672>not</span> to fine<span style=color:#f92672>-</span>tune a model until I<span style=color:#e6db74>&#39;ve really exhausted the other</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>options, because fine<span style=color:#f92672>-</span>tuning tends to be quite complex<span style=color:#f92672>.</span> But <span style=color:#66d9ef>for</span> applications where after trying
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>everything <span style=color:#66d9ef>else</span>, <span style=color:#66d9ef>if</span> I<span style=color:#e6db74>&#39;m still at, say, 90% performance or 95% performance, and I really</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>need to eke out those last few percentage points of improvement, then sometimes fine<span style=color:#f92672>-</span>tuning my own
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>custom model is a great technique to use<span style=color:#f92672>.</span> I tend to <span style=color:#66d9ef>do</span> this only on the more mature applications
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>41</span>
</span></span><span style=display:flex><span>because of how costly it is<span style=color:#f92672>.</span> It turns out that when you<span style=color:#e6db74>&#39;re trying to choose an LLM to use,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>47</span>
</span></span><span style=display:flex><span>one thing that<span style=color:#e6db74>&#39;s very hopeful for you as a developer is if you have good intuitions about</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>52</span>
</span></span><span style=display:flex><span>how intelligent <span style=color:#f92672>or</span> how capable different large language models are<span style=color:#f92672>.</span> One thing you can <span style=color:#66d9ef>do</span> is just
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>try a lot of models <span style=color:#f92672>and</span> see what works best<span style=color:#f92672>.</span> But I find that as I work with different models,
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>I start to hone intuitions about which models work best <span style=color:#66d9ef>for</span> what types of tasks<span style=color:#f92672>.</span> And when you hone
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>those intuitions, you can be more efficient as well <span style=color:#f92672>in</span> writing good prompts <span style=color:#66d9ef>for</span> the model as
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>well as choosing good models <span style=color:#66d9ef>for</span> your tasks<span style=color:#f92672>.</span> So I<span style=color:#e6db74>&#39;d like to share with you some thoughts on how to</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>hone your intuition on what models will work well <span style=color:#66d9ef>for</span> your application<span style=color:#f92672>.</span> Let<span style=color:#e6db74>&#39;s illustrate this with</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>an example of using an LLM to follow instructions to remove <span style=color:#f92672>or</span> to redact PII <span style=color:#f92672>or</span> personally
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>29</span>
</span></span><span style=display:flex><span>identifiable information<span style=color:#f92672>.</span> So you<span style=color:#e6db74>&#39;re now to remove private sensitive information. For example,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> you are using an LLM to summarize customer calls, then maybe one summary is on July <span style=color:#ae81ff>14</span>th,
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>41</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2023</span>, Jessica Alvarez with a social security number, a certain address, a business support
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>46</span>
</span></span><span style=display:flex><span>ticket, <span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> So this piece of text has a lot of sensitive, personally identifiable
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>52</span>
</span></span><span style=display:flex><span>information<span style=color:#f92672>.</span> Now, let<span style=color:#e6db74>&#39;s say we want to remove all PII from such summaries because we want to use the</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>data <span style=color:#66d9ef>for</span> downstream statistical analysis of what customers are calling about<span style=color:#f92672>.</span> And to protect customer
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>03</span>
</span></span><span style=display:flex><span>information, we want to strip out that PII before we <span style=color:#66d9ef>do</span> that downstream statistical analysis<span style=color:#f92672>.</span> So you
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>08</span>
</span></span><span style=display:flex><span>might prompt an LLM with instructions to identify all cases of PII <span style=color:#f92672>in</span> the text below <span style=color:#f92672>and</span> then <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>the redacted text with redacted colon <span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> It turns out that the larger frontier models tend
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>to be much better at following instructions, whereas the smaller models tend to be pretty
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>29</span>
</span></span><span style=display:flex><span>good at answering simple factual questions, but are just <span style=color:#f92672>not</span> as good at following instructions<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>If you run this prompt on the smaller model, the OpenWay Llama <span style=color:#ae81ff>3.1</span> model with <span style=color:#ae81ff>8</span> billion parameters,
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>then it may generate an output like this<span style=color:#f92672>.</span> It says the identified PII is social security number <span style=color:#f92672>and</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>address, <span style=color:#f92672>and</span> then it redacts it as follows <span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> And it actually makes a few errors<span style=color:#f92672>.</span> It didn<span style=color:#e6db74>&#39;t</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>follow the instructions properly<span style=color:#f92672>.</span> It showed the list, then redacted the text, then returned another
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>list, which it wasn<span style=color:#e6db74>&#39;t supposed to. And in this list of PII, it missed the name. And then I think</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>02</span>
</span></span><span style=display:flex><span>it also didn<span style=color:#e6db74>&#39;t redact partly the address. So details aren&#39;</span>t important, but it didn<span style=color:#e6db74>&#39;t follow these instructions</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>07</span>
</span></span><span style=display:flex><span>perfectly, <span style=color:#f92672>and</span> maybe it missed a little bit of PII<span style=color:#f92672>.</span> In contrast, <span style=color:#66d9ef>if</span> you use a more intelligent model,
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>one that<span style=color:#e6db74>&#39;s better at following instructions, you may get a better result like this, where it&#39;</span>s
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span>actually correctly listed all the PII <span style=color:#f92672>and</span> correctly redacted all of the PII<span style=color:#f92672>.</span> And so I find that as
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>24</span>
</span></span><span style=display:flex><span>different LLM providers specialize on different tasks, different models really are better <span style=color:#66d9ef>for</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>different tasks<span style=color:#f92672>.</span> Some are better at coding, some are better at following instructions, some are better
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>at certain niche types of facts<span style=color:#f92672>.</span> And <span style=color:#66d9ef>if</span> you can hold your intuition <span style=color:#66d9ef>for</span> what models are more <span style=color:#f92672>or</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>less intelligent, <span style=color:#f92672>and</span> what type of instructions they<span style=color:#e6db74>&#39;re more or less able to follow, then you&#39;</span>ll
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>44</span>
</span></span><span style=display:flex><span>be able to make better decisions as to what models to use<span style=color:#f92672>.</span> So to share a couple tips on how to <span style=color:#66d9ef>do</span> this,
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>I encourage you to play with different models often<span style=color:#f92672>.</span> So whenever I <span style=color:#66d9ef>do</span> a new model release,
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span>I<span style=color:#e6db74>&#39;ll often go try it out and try out different queries on it, both closed-weight proprietary</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>models as well as open<span style=color:#f92672>-</span>weight models<span style=color:#f92672>.</span> And I find that sometimes having a personal set of evals might
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>also be helpful, where there<span style=color:#e6db74>&#39;s a set of things you ask a lot of different models that might help you</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>calibrate how well they <span style=color:#66d9ef>do</span> on different types of tasks<span style=color:#f92672>.</span> One other thing that I <span style=color:#66d9ef>do</span> a lot that I hope
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>will be useful to you is I spend a lot of time reading other people<span style=color:#e6db74>&#39;s prompts. So sometimes</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>people will publish their prompts on the internet, <span style=color:#f92672>and</span> I<span style=color:#e6db74>&#39;ll often go and read them to understand</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>27</span>
</span></span><span style=display:flex><span>what best practices <span style=color:#f92672>in</span> prompting look like<span style=color:#f92672>.</span> Or I<span style=color:#e6db74>&#39;ll often chat to my friends at various companies,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>including some of the frontier model companies, <span style=color:#f92672>and</span> share my prompts with them, take a look at
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>how they prompt<span style=color:#f92672>.</span> And sometimes I<span style=color:#e6db74>&#39;ll also go to open-source packages written by people I really</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span>respect <span style=color:#f92672>and</span> download the open<span style=color:#f92672>-</span>source package <span style=color:#f92672>and</span> dig through that open<span style=color:#f92672>-</span>source package to find the
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>prompts the authors have written <span style=color:#f92672>in</span> order to read it, <span style=color:#f92672>in</span> order to hold my intuition about how to
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>write good prompts<span style=color:#f92672>.</span> This is one technique that I encourage you to consider, is by reading lots of
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>other people<span style=color:#e6db74>&#39;s prompts that will help you get better at writing prompts yourself. And I certainly</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>04</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>do</span> this a lot, <span style=color:#f92672>and</span> I encourage you to <span style=color:#66d9ef>do</span> so too<span style=color:#f92672>.</span> And this will hone your intuition about what types
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span>of instructions models are good at following, <span style=color:#f92672>and</span> when to say certain things to different models<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>14</span>
</span></span><span style=display:flex><span>In addition to playing with models <span style=color:#f92672>and</span> reading other people<span style=color:#e6db74>&#39;s prompts, if you try out lots of</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>different models <span style=color:#f92672>in</span> your agentic workflows, that also lets you hone your intuition<span style=color:#f92672>.</span> So you see
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>24</span>
</span></span><span style=display:flex><span>which models work best <span style=color:#66d9ef>for</span> which types of tasks, <span style=color:#f92672>and</span> either looking at traces to get an informal
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>sense, <span style=color:#f92672>or</span> looking at either component<span style=color:#f92672>-</span>wise <span style=color:#f92672>or</span> end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end evals can help you assess how well
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>different models are working <span style=color:#66d9ef>for</span> different parts of your workflow<span style=color:#f92672>.</span> And then you start to hone
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>intuitions about <span style=color:#f92672>not</span> just performance, but maybe also price <span style=color:#f92672>and</span> speed trade<span style=color:#f92672>-</span>offs <span style=color:#66d9ef>for</span> the use of
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>46</span>
</span></span><span style=display:flex><span>different models<span style=color:#f92672>.</span> And one of the reasons I tend to develop my agentic workflows with AI Suite is
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>because it then makes it easy to quickly swap out <span style=color:#f92672>and</span> try out different models<span style=color:#f92672>.</span> And this makes me
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>56</span>
</span></span><span style=display:flex><span>more efficient <span style=color:#f92672>in</span> terms of trying out <span style=color:#f92672>and</span> assessing which models work best <span style=color:#66d9ef>for</span> my workflow<span style=color:#f92672>.</span> So we<span style=color:#e6db74>&#39;ve</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>02</span>
</span></span><span style=display:flex><span>talked a lot about how to improve the performance of different components to hopefully improve the
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>08</span>
</span></span><span style=display:flex><span>overall performance of your end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end system<span style=color:#f92672>.</span> In addition to improving the quality of the output,
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>one other thing you might want to <span style=color:#66d9ef>do</span> <span style=color:#f92672>in</span> your workflows is to optimize the latency as well as
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span>cost<span style=color:#f92672>.</span> I find that <span style=color:#66d9ef>for</span> a lot of teams, when you start developing, usually the number one thing
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>to worry about is just are the outputs sufficiently high quality<span style=color:#f92672>.</span> But then when the system is working
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>31</span>
</span></span><span style=display:flex><span>well <span style=color:#f92672>and</span> you put <span style=color:#f92672>in</span> the production, then there<span style=color:#e6db74>&#39;s often value to make it run faster as well as run</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>37</span>
</span></span><span style=display:flex><span>at lower cost as well<span style=color:#f92672>.</span> So <span style=color:#f92672>in</span> the next video, let<span style=color:#e6db74>&#39;s take a look at some ideas for improving</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span>cost <span style=color:#f92672>and</span> latency <span style=color:#66d9ef>for</span> agentic workflows<span style=color:#f92672>.</span>
</span></span></code></pre></div><h2 id=46-latency-cost-optimization>4.6 Latency, cost optimization</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>When building agentic workflows, I<span style=color:#e6db74>&#39;ll often advise teams to focus on getting high-quality outputs</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> to optimize cost <span style=color:#f92672>and</span> latency only later<span style=color:#f92672>.</span> It<span style=color:#e6db74>&#39;s not that cost and latency don&#39;</span>t matter,
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>but I think getting the performance <span style=color:#f92672>or</span> the output quality to be high is usually the hardest part,
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> then only when it<span style=color:#e6db74>&#39;s really working, then maybe focus on the other things.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>One thing that<span style=color:#e6db74>&#39;s happened to me a few times was my team built an agentic workflow,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> we shipped it to users, <span style=color:#f92672>and</span> then we were fortunate enough to have so many users use it
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>31</span>
</span></span><span style=display:flex><span>that the cost actually became a problem, <span style=color:#f92672>and</span> then we had to, you know, stramble to bring the cost
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>back down<span style=color:#f92672>.</span> But that<span style=color:#e6db74>&#39;s a good problem to have, so I tend to worry about cost, usually less.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span>Not that I ignore it completely, but it<span style=color:#e6db74>&#39;s just lower down my list of things to worry about,</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>47</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> so we have so many users that we really need to bring the cost down per user<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>And then latency, I tend to worry a bit about it, but again, <span style=color:#f92672>not</span> as much as just making sure
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>57</span>
</span></span><span style=display:flex><span>the output quality is high<span style=color:#f92672>.</span> But when you <span style=color:#66d9ef>do</span> get there, it will be useful to have tools to optimize
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>03</span>
</span></span><span style=display:flex><span>latency <span style=color:#f92672>and</span> cost<span style=color:#f92672>.</span> Let<span style=color:#e6db74>&#39;s take a look at some ideas on how to do that.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>If you want to optimize the latency of an agentic workflow, one thing I will often <span style=color:#66d9ef>do</span> is then
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span>benchmark <span style=color:#f92672>or</span> time the workflow<span style=color:#f92672>.</span> So <span style=color:#f92672>in</span> this research agent, it takes a number of steps,
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> <span style=color:#66d9ef>if</span> I were to time each of the steps, maybe LLM takes <span style=color:#ae81ff>7</span> seconds to generate the search terms<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span>Web search takes <span style=color:#ae81ff>5</span> seconds, this takes <span style=color:#ae81ff>3</span> seconds, this takes <span style=color:#ae81ff>11</span> seconds,
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> then writing the final essay takes <span style=color:#ae81ff>18</span> seconds on average<span style=color:#f92672>.</span> And it is then by looking at this
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>35</span>
</span></span><span style=display:flex><span>overall timeline that I can get a sense of which components have the most room <span style=color:#66d9ef>for</span> making faster<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>In this example, there may be multiple things you could try<span style=color:#f92672>.</span> If you haven<span style=color:#e6db74>&#39;t already taken</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>47</span>
</span></span><span style=display:flex><span>advantage of parallelism <span style=color:#66d9ef>for</span> some steps, like maybe web fetch, maybe it<span style=color:#e6db74>&#39;s worth considering</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>doing some of these operations <span style=color:#f92672>in</span> parallel<span style=color:#f92672>.</span> Or <span style=color:#66d9ef>if</span> you find that some of the LLMs sets are
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>59</span>
</span></span><span style=display:flex><span>taking too long, so <span style=color:#66d9ef>if</span> this first step takes <span style=color:#ae81ff>7</span> seconds, this last LLMs set takes <span style=color:#ae81ff>18</span> seconds,
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>04</span>
</span></span><span style=display:flex><span>I might also consider trying a smaller, maybe slightly less intelligent model to see <span style=color:#66d9ef>if</span> it
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>09</span>
</span></span><span style=display:flex><span>still works well enough <span style=color:#66d9ef>for</span> that, <span style=color:#f92672>or</span> <span style=color:#66d9ef>if</span> I can find a faster LLM provider<span style=color:#f92672>.</span> There are lots of APIs online
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>14</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> different LLMs interfaces, <span style=color:#f92672>and</span> some companies have specialized hardware to allow them to serve
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>certain LLMs much faster, so sometimes it<span style=color:#e6db74>&#39;s worth trying different LLMs providers to see which ones</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span>can <span style=color:#66d9ef>return</span> tokens the fastest<span style=color:#f92672>.</span> But at least doing this type of timing analysis can give you a sense
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>of which components to focus on <span style=color:#f92672>in</span> terms of reducing latency<span style=color:#f92672>.</span> In terms of optimizing costs,
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>39</span>
</span></span><span style=display:flex><span>a similar calculation where you calculate the cost of each step would also let you benchmark
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> decide which steps to focus on<span style=color:#f92672>.</span> Many LLMs providers charge per token based on the input
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> output length<span style=color:#f92672>.</span> Many API providers charge per API call, <span style=color:#f92672>and</span> the computational steps may have
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span>different costs based on how you pay <span style=color:#66d9ef>for</span> server capacity <span style=color:#f92672>and</span> how much the service costs<span style=color:#f92672>.</span> And so
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> a process like this, you might decide <span style=color:#f92672>in</span> this example that the tokens <span style=color:#66d9ef>for</span> this LLMs step on
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>average cost <span style=color:#ae81ff>0.04</span> cents, each web search API maybe costs <span style=color:#ae81ff>1.6</span> cents, tokens cost this much,
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>14</span>
</span></span><span style=display:flex><span>API call costs this much, PDF to text costs this much, tokens <span style=color:#66d9ef>for</span> the final SA generation cost this
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>much, <span style=color:#f92672>and</span> this would maybe again give you a sense of are there cheaper components you could use <span style=color:#f92672>or</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>cheaper LLMs you could use to see where the biggest opportunity is <span style=color:#66d9ef>for</span> optimizing costs<span style=color:#f92672>.</span> And I found
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>29</span>
</span></span><span style=display:flex><span>that these benchmarking exercises can be very clarifying, <span style=color:#f92672>and</span> sometimes they<span style=color:#e6db74>&#39;ll clearly tell</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>34</span>
</span></span><span style=display:flex><span>me that certain components are just <span style=color:#f92672>not</span> worth worrying about because they<span style=color:#e6db74>&#39;re not that material</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span><span style=color:#f92672>or</span> contributor to either cost <span style=color:#f92672>or</span> to latency<span style=color:#f92672>.</span> So I find that when either cost <span style=color:#f92672>or</span> latency becomes
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>an issue, by simply measuring the cost <span style=color:#f92672>and</span> <span style=color:#f92672>or</span> latency of each step, that often gives you a
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>basis with which to decide which components to focus on optimizing<span style=color:#f92672>.</span> So we<span style=color:#e6db74>&#39;re nearly at the end</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>58</span>
</span></span><span style=display:flex><span>of this module<span style=color:#f92672>.</span> I know we<span style=color:#e6db74>&#39;ve covered a lot, but thank you for sticking with me. Let&#39;</span>s go on to
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>02</span>
</span></span><span style=display:flex><span>the final video of this module to wrap up<span style=color:#f92672>.</span>
</span></span></code></pre></div><h2 id=47-development-process-summary>4.7 Development process summary</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>We<span style=color:#e6db74>&#39;ve gone through a lot of tips for driving a disciplined, efficient process for building</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>Agentic AI systems<span style=color:#f92672>.</span> I<span style=color:#e6db74>&#39;d like to wrap up by sharing with you what it feels like to be going through</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>this process<span style=color:#f92672>.</span> When I<span style=color:#e6db74>&#39;m building these workflows, I feel like there are two major activities I&#39;</span>m
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>often spending time on<span style=color:#f92672>.</span> One is building, so writing software, trying to write code to improve
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span>my system<span style=color:#f92672>.</span> And the second, which sometimes doesn<span style=color:#e6db74>&#39;t feel like progress, but I think is equally</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>27</span>
</span></span><span style=display:flex><span>important, is analysis to help me decide where to focus my build efforts next<span style=color:#f92672>.</span> And I often go
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>back <span style=color:#f92672>and</span> forth between building <span style=color:#f92672>and</span> analyzing, including things like error analysis<span style=color:#f92672>.</span> So <span style=color:#66d9ef>for</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span>example, when building a new agentic workflow, I<span style=color:#e6db74>&#39;ll often start by quickly building an end-to-end</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>system, maybe even a quick <span style=color:#f92672>and</span> dirty implementation<span style=color:#f92672>.</span> And this lets me then start to examine the final
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>outputs of the end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end system, <span style=color:#f92672>or</span> also read through traces to get a sense of where it<span style=color:#e6db74>&#39;s doing</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>54</span>
</span></span><span style=display:flex><span>well, where it<span style=color:#e6db74>&#39;s doing poorly. Based on even just looking at traces, sometimes this will give me a</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>59</span>
</span></span><span style=display:flex><span>gut sense of which individual components I might want to improve<span style=color:#f92672>.</span> And so I might go tune some
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>individual components <span style=color:#f92672>or</span> keep tuning the overall end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end system<span style=color:#f92672>.</span> As my system starts to mature
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>a little bit more, then beyond just manually examining a few outputs <span style=color:#f92672>and</span> reading through
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>traces, I might start to build evals <span style=color:#f92672>and</span> have a small data set, maybe just <span style=color:#ae81ff>10</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20</span> examples,
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span>to compute metrics, at least on end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end performance<span style=color:#f92672>.</span> And this then further helps me
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>27</span>
</span></span><span style=display:flex><span>have a more refined perspective on how to improve the end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end system <span style=color:#f92672>or</span> how to improve individual
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>components<span style=color:#f92672>.</span> As it matures even further, my analysis then becomes maybe even more disciplined, where I
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span>start to <span style=color:#66d9ef>do</span> error analysis <span style=color:#f92672>and</span> look through the components <span style=color:#f92672>and</span> try to count up how frequently
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span>individual components led to subpar outputs<span style=color:#f92672>.</span> And this more rigorous analysis then lets me be even
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>more focused <span style=color:#f92672>in</span> deciding what components to work on next <span style=color:#f92672>or</span> inspire ideas <span style=color:#66d9ef>for</span> improving the overall
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>54</span>
</span></span><span style=display:flex><span>end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end system<span style=color:#f92672>.</span> And then eventually, when it<span style=color:#e6db74>&#39;s even more mature to drive more efficient improvements</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>at the component level, that<span style=color:#e6db74>&#39;s when I might also build component-level evals. And so the workflow</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>06</span>
</span></span><span style=display:flex><span>of building an agentic system often goes back <span style=color:#f92672>and</span> forth<span style=color:#f92672>.</span> It<span style=color:#e6db74>&#39;s not a linear process. We sometimes</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>tune the end<span style=color:#f92672>-</span>to<span style=color:#f92672>-</span>end system, then <span style=color:#66d9ef>do</span> some error analysis, then improve a component <span style=color:#66d9ef>for</span> a bit,
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>then tune the component<span style=color:#f92672>-</span>level evals<span style=color:#f92672>.</span> And I tend to bounce back <span style=color:#f92672>and</span> forth between these two types
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>of techniques<span style=color:#f92672>.</span> And what I see less experienced teams often <span style=color:#66d9ef>do</span> is spend a lot of time building
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>27</span>
</span></span><span style=display:flex><span><span style=color:#f92672>and</span> probably much less time analyzing with error analysis, building evals, <span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> That would be
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>ideal because this is analysis that helps you really focus where to spend your time building<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span>And just one more tip<span style=color:#f92672>.</span> There are actually quite a few tools out there to help with monitoring traces,
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>44</span>
</span></span><span style=display:flex><span>logging runtime, computing costs, <span style=color:#f92672>and</span> so on<span style=color:#f92672>.</span> And those tools can be helpful<span style=color:#f92672>.</span> I sometimes use a few
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>of them, <span style=color:#f92672>and</span> quite a few of DeepLearning<span style=color:#f92672>.</span>ai short course partners offer those tools, <span style=color:#f92672>and</span> they <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>54</span>
</span></span><span style=display:flex><span>work well<span style=color:#f92672>.</span> I find that <span style=color:#66d9ef>for</span> agentic workflows I end up working on, most agentic workflows are pretty
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>custom<span style=color:#f92672>.</span> And so I end up building pretty custom evals myself because I want to capture the things
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>07</span>
</span></span><span style=display:flex><span>that work incorrectly with my system<span style=color:#f92672>.</span> So even though I <span style=color:#66d9ef>do</span> use some of those tools, I also end
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>up building a lot of custom evals that are well fit to my specific application <span style=color:#f92672>and</span> the issues I
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>see with it<span style=color:#f92672>.</span> So thanks <span style=color:#66d9ef>for</span> sticking with me this far to the end of the fourth of five modules<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>If you<span style=color:#e6db74>&#39;re able to implement even a fraction of the ideas from this module, I think you&#39;</span>ll be
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>well ahead of the vast majority of developers <span style=color:#f92672>in</span> terms of your sophistication at implementing
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>38</span>
</span></span><span style=display:flex><span>agentic workflows<span style=color:#f92672>.</span> Hope you found these materials useful, <span style=color:#f92672>and</span> I look forward to seeing you <span style=color:#f92672>in</span> the
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>final module<span style=color:#f92672>.</span> We<span style=color:#e6db74>&#39;ll talk about some more advanced design patterns for building</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>:<span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>highly autonomous agents<span style=color:#f92672>.</span> I<span style=color:#e6db74>&#39;ll see you in the last module of this course.```</span>
</span></span></code></pre></div></div></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-10 border-t border-border pt-8"><a class="flex items-stretch gap-3 p-4 rounded-xl border border-border bg-surface transition-all duration-200 hover:shadow-md hover:border-accent/40 group no-underline text-inherit" href=/courses/andrew-ng-agentic-ai/lecture/lec-03/ aria-label="上一篇：「Scripts」Module 3: Tool Use"><div class="flex items-center text-2xl text-muted font-light group-hover:text-accent transition-colors">‹</div><div class="flex-1 min-w-0 flex flex-col justify-center"><div class="font-semibold text-base text-text line-clamp-2 group-hover:text-accent transition-colors">「Scripts」Module 3: Tool Use</div><div class="text-xs text-muted mt-1"><span>Andrew Ng</span>
·
<span>2025-10-17</span></div></div></a><a class="flex items-stretch gap-3 p-4 rounded-xl border border-border bg-surface transition-all duration-200 hover:shadow-md hover:border-accent/40 group no-underline text-inherit text-right" href=/courses/andrew-ng-agentic-ai/lecture/lec-05/ aria-label="下一篇：「Scripts」Module 5: Patterns for Highly Autonomous Agents"><div class="flex-1 min-w-0 flex flex-col justify-center items-end"><div class="font-semibold text-base text-text line-clamp-2 group-hover:text-accent transition-colors">「Scripts」Module 5: Patterns for Highly Autonomous Agents</div><div class="text-xs text-muted mt-1"><span>Andrew Ng</span>
·
<span>2025-10-17</span></div></div><div class="flex items-center text-2xl text-muted font-light group-hover:text-accent transition-colors">›</div></a></div><section class="comments mt-12 pt-8 border-t border-border" aria-label=Comments><div id=giscus_thread class=giscus data-repo=Linguage/Giscus data-repo-id=R_kgDOLxA-eA data-category=Announcements data-category-id=DIC_kwDOLxA-eM4Ce06R data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme-light=light data-theme-dark=dark data-lang=zh-CN></div><script>(function(){try{const e=document.getElementById("giscus_thread");if(!e)return;let n=null;try{const e=localStorage.getItem("theme");(e==="light"||e==="dark")&&(n=e)}catch{n=null}const o=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,i=n?n:o?"dark":"light",s=i==="dark"?e.dataset.themeDark||"dark":e.dataset.themeLight||"light";e.setAttribute("data-theme",s);const t=document.createElement("script");t.src="https://giscus.app/client.js",t.setAttribute("data-repo",e.dataset.repo||""),t.setAttribute("data-repo-id",e.dataset.repoId||""),t.setAttribute("data-category",e.dataset.category||"General"),t.setAttribute("data-category-id",e.dataset.categoryId||""),t.setAttribute("data-mapping",e.dataset.mapping||"pathname"),t.setAttribute("data-strict",String(e.dataset.strict||"0")),t.setAttribute("data-reactions-enabled",String(e.dataset.reactionsEnabled||"1")),t.setAttribute("data-emit-metadata",String(e.dataset.emitMetadata||"0")),t.setAttribute("data-input-position",e.dataset.inputPosition||"bottom"),t.setAttribute("data-theme",s),t.setAttribute("data-lang",e.dataset.lang||"zh-CN"),t.setAttribute("crossorigin","anonymous"),t.async=!0,e.parentNode.insertBefore(t,e.nextSibling)}catch{}})()</script></section></article><aside class="docs-toc sticky top-[84px] max-h-[calc(100vh-100px)] overflow-y-auto hidden xl:block md-theme-amp-toc" aria-label="On this page"><div class="toc-title uppercase mb-4">On this page</div><nav class="toc flex flex-col gap-1"><nav id=TableOfContents><ul><li><a href=#41-evaluationsevals>4.1 Evaluations(evals)</a></li><li><a href=#42-error-analysis-and-prioritizing-next-steps>4.2 Error analysis and prioritizing next steps</a></li><li><a href=#43-more-error-analysis-examples>4.3 More error analysis examples</a></li><li><a href=#44-component-level-evaluations>4.4 Component-level evaluations</a></li><li><a href=#45-how-to-address-problems-you-identify>4.5 How to address problems you identify</a></li><li><a href=#46-latency-cost-optimization>4.6 Latency, cost optimization</a></li><li><a href=#47-development-process-summary>4.7 Development process summary</a></li></ul></nav></nav></aside></div><button class="fixed right-6 bottom-20 z-50 p-2 rounded-full bg-surface border border-border shadow-lg cursor-pointer opacity-0 transition-opacity duration-300 hover:bg-bg" id=backToTop aria-label="Back to top">↑</button><div id=mobileTocContainer class="xl:hidden fixed bottom-6 left-4 right-4 z-[80] flex flex-col items-center"><div id=mobileTocPanel class="w-full max-w-md bg-white/95 dark:bg-black/95 backdrop-blur-xl border border-slate-200 dark:border-white/10 rounded-xl shadow-2xl mb-3 max-h-[60vh] overflow-y-auto p-4 hidden transition-all duration-200 origin-bottom scale-95 opacity-0"><div class="flex justify-between items-center mb-4 sticky top-0 bg-white/95 dark:bg-black/95 backdrop-blur-xl pb-2 border-b border-slate-200 dark:border-white/10 -mx-4 px-4 pt-1 z-10"><h4 class="text-sm font-bold text-slate-900 dark:text-slate-100 flex items-center gap-2"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-accent-2"><line x1="21" y1="10" x2="3" y2="10"/><line x1="21" y1="6" x2="3" y2="6"/><line x1="21" y1="14" x2="3" y2="14"/><line x1="21" y1="18" x2="3" y2="18"/></svg>
目录</h4><button id=mobileTocCloseBtn class="p-1 text-slate-500 hover:text-slate-900 dark:hover:text-slate-100 transition-colors">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div><nav class="toc text-sm leading-relaxed [&_a]:block [&_a]:py-1.5 [&_li]:my-1"><nav id=TableOfContents><ul><li><a href=#41-evaluationsevals>4.1 Evaluations(evals)</a></li><li><a href=#42-error-analysis-and-prioritizing-next-steps>4.2 Error analysis and prioritizing next steps</a></li><li><a href=#43-more-error-analysis-examples>4.3 More error analysis examples</a></li><li><a href=#44-component-level-evaluations>4.4 Component-level evaluations</a></li><li><a href=#45-how-to-address-problems-you-identify>4.5 How to address problems you identify</a></li><li><a href=#46-latency-cost-optimization>4.6 Latency, cost optimization</a></li><li><a href=#47-development-process-summary>4.7 Development process summary</a></li></ul></nav></nav></div><button id=mobileTocToggleBtn class="w-full max-w-md bg-white/90 dark:bg-black/90 backdrop-blur-md border border-slate-200 dark:border-white/10 shadow-lg rounded-full px-5 py-3 flex items-center justify-between text-sm font-medium hover:bg-slate-50 dark:hover:bg-white/5 transition-all active:scale-[0.98]" aria-controls=mobileTocPanel aria-expanded=false aria-label="Toggle Table of Contents"><div class="flex items-center overflow-hidden mr-4"><div class="bg-slate-100 dark:bg-white/10 p-1.5 rounded-full mr-3 shrink-0"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-900 dark:text-slate-100"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg></div><span id=mobileTocCurrentHeading class="truncate text-slate-900/90 dark:text-slate-100/90 font-medium text-left">目录</span></div><div id=mobileTocChevron class="text-slate-500 shrink-0 transition-transform duration-200"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg></div></button></div></main><script src="/script.js?v=20260125-03" defer></script><script defer src="/js/search-core.js?v=20260125-03"></script><script>window.SEARCH_INDEX_URL_LITE="/index-lite.json?v=20260125-03",window.SEARCH_INDEX_URL="/index.json?v=20260125-03"</script><script src="/js/search-advanced.js?v=20260125-03" defer></script><script defer src="/js/linkcard.js?v=20260125-03"></script><script defer src="/js/social-popup.js?v=20260125-03"></script><div id=social-popup-overlay aria-hidden=true class="fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300"><div class="social-popup-card bg-surface p-6 rounded-2xl shadow-2xl max-w-sm w-[90%] relative transform scale-95 transition-transform duration-300" role=dialog aria-modal=true aria-labelledby=social-popup-title aria-describedby=social-popup-desc><button class="social-popup-close absolute top-3 right-3 p-2 rounded-full bg-muted/10 hover:bg-muted/20 text-muted transition-colors" type=button aria-label=关闭>×</button>
<img class="social-popup-image w-full h-auto rounded-lg mb-4" src alt><div class="social-popup-title text-xl font-semibold text-text mb-2" id=social-popup-title></div><div class="social-popup-desc text-sm text-muted" id=social-popup-desc></div></div></div></body></html>
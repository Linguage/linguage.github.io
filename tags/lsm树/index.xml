<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>LSM树 on Linguista</title><link>https://linguista.cn/tags/lsm%E6%A0%91/</link><description>Recent content in LSM树 on Linguista</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Wed, 22 Jan 2025 00:00:00 +0800</lastBuildDate><atom:link href="https://linguista.cn/tags/lsm%E6%A0%91/index.xml" rel="self" type="application/rss+xml"/><item><title>数据库基础与存储引擎设计</title><link>https://linguista.cn/infos/tldrcards/henrinotes_2025_p4/database-fundamentals-storage-engines/</link><pubDate>Wed, 22 Jan 2025 00:00:00 +0800</pubDate><guid>https://linguista.cn/infos/tldrcards/henrinotes_2025_p4/database-fundamentals-storage-engines/</guid><description>&lt;h1 id="数据库基础与存储引擎设计"&gt;数据库基础与存储引擎设计&lt;/h1&gt;
&lt;h2 id="摘要"&gt;摘要&lt;/h2&gt;
&lt;p&gt;本文作者从零开始实现一个简单的数据库，引出数据库设计的核心问题。文章首先展示了用Bash编写的最简数据库bashdb，指出其在持久性、原子性和隔离性方面的缺陷。随后系统讲解ACID特性的内涵，深入剖析存储引擎的设计原理，包括B树/B+树和LSM树两种主流架构，最后扩展到分布式系统的CAP定理、一致性哈希和反熵机制等关键概念。&lt;/p&gt;
&lt;h2 id="内容框架与概述"&gt;内容框架与概述&lt;/h2&gt;
&lt;p&gt;文章从作者的亲身经历出发，描述了在学习数据库选型过程中遇到的困惑，以及通过阅读《Database Internals》和《Designing Data-Intensive Applications》两本经典著作获得启发的过程。作者尝试编写自己的数据库dbeel，并以此为基础展开对数据库核心概念的讲解。&lt;/p&gt;
&lt;p&gt;在ACID特性部分，文章详细解释了原子性、一致性、隔离性和持久性的具体含义，并探讨了如何在bashdb的基础上逐步实现这些特性。作者指出，持久性可以通过sync或fsync系统调用实现，隔离性可以通过文件锁flock解决，但原子性的实现需要更复杂的机制。&lt;/p&gt;
&lt;p&gt;存储引擎是文章的重点内容。作者分析了存储引擎面临的性能瓶颈——磁盘I/O和延迟，然后介绍了两种主流的存储引擎架构：B树/B+树和LSM树。对于B树，文章强调了其减少磁盘访问次数的设计理念；对于LSM树，则详细讲解了SSTable、WAL、压缩机制和布隆过滤器等核心组件。&lt;/p&gt;
&lt;p&gt;最后，文章将视野扩展到分布式系统，讨论了CAP定理的理论约束、一致性哈希的数据分配策略、副本机制对可用性的影响，以及反熵机制的各种实现方式。&lt;/p&gt;
&lt;h2 id="核心概念及解读"&gt;核心概念及解读&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ACID特性&lt;/strong&gt;：数据库事务的四大属性。原子性确保事务要么全部成功要么全部失败，一致性保证数据始终处于合法状态，隔离性使并发事务互不干扰，持久性确保已提交数据不会因系统崩溃而丢失。这四个特性共同构成了数据库可靠性的基础。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LSM树&lt;/strong&gt;：Log Structured Merge Tree，一种基于日志结构的存储引擎。它将随机写转换为顺序写，先在内存中缓冲数据，然后定期刷新到磁盘的SSTable文件中，通过后台压缩合并文件。这种设计极大地优化了写入性能，特别适合写密集型场景。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CAP定理&lt;/strong&gt;：分布式系统的理论约束，指出一致性、可用性和分区容错性三者不可兼得。在实际系统中，由于网络分区不可避免，设计者需要在一致性和可用性之间做出权衡选择。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Write-Ahead Log（WAL）&lt;/strong&gt;：预写式日志，事务实现的关键技术。所有修改操作在写入实际数据前先记录到日志中，即使系统崩溃也能通过重放日志恢复数据，是实现原子性和持久性的核心机制。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;反熵机制&lt;/strong&gt;：分布式系统中保证数据最终一致性的技术集合。包括读修复、暗示传递、默克尔树比较和流言传播等多种策略，目的是检测并修复节点间的数据不一致，使系统自动收敛到一致状态。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="原文信息"&gt;原文信息&lt;/h2&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;字段&lt;/th&gt;
 &lt;th&gt;内容&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;原文&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://tontinton.com/posts/database-fundementals/?utm_source=bonobopress&amp;amp;utm_medium=newsletter&amp;amp;utm_campaign=1800"&gt;Database Fundamentals&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;作者&lt;/td&gt;
 &lt;td&gt;tontinton&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;发表日期&lt;/td&gt;
 &lt;td&gt;2025-01-22&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;此文档由 AI 自动整理&lt;/em&gt;&lt;/p&gt;</description></item></channel></rss>
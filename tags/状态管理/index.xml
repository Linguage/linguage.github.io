<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>状态管理 on Linguista</title><link>https://linguista.cn/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/</link><description>Recent content in 状态管理 on Linguista</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Wed, 22 Jan 2025 00:00:00 +0800</lastBuildDate><atom:link href="https://linguista.cn/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/index.xml" rel="self" type="application/rss+xml"/><item><title>软件设计原则的四个教训</title><link>https://linguista.cn/curated/henrinotes_2025_p4/software-design-principles-lessons-learned/</link><pubDate>Wed, 22 Jan 2025 00:00:00 +0800</pubDate><guid>https://linguista.cn/curated/henrinotes_2025_p4/software-design-principles-lessons-learned/</guid><description>&lt;h1 id="软件设计原则的四个教训"&gt;软件设计原则的四个教训&lt;/h1&gt;
&lt;h2 id="摘要"&gt;摘要&lt;/h2&gt;
&lt;p&gt;本文基于作者设计和实现大型服务项目的实践经验，总结了四个重要的软件设计原则。这些原则从反面教训出发，帮助工程师避免常见的软件设计陷阱，包括数据同步问题、过度抽象、测试可靠性以及状态管理等核心议题。&lt;/p&gt;
&lt;h2 id="内容框架与概述"&gt;内容框架与概述&lt;/h2&gt;
&lt;p&gt;文章首先介绍了作者的实践背景，通过一个大型服务项目的开发经历，提炼出四个反复出现的设计原则。这些原则往往与传统观点存在差异，体现了实践中获得的真实经验。&lt;/p&gt;
&lt;p&gt;第一原则强调维护单一数据源的重要性。作者指出，当同一数据在多个地方维护时，很容易出现同步错误。派生数据应该动态计算而非单独存储，这样可以避免数据不一致的问题。虽然计算成本可能增加，但可靠性是更重要的考虑因素。&lt;/p&gt;
&lt;p&gt;第二原则提出了一个反直觉的观点——请重复自己（PRY）。作者反思了DRY（Don&amp;rsquo;t Repeat Yourself）原则的局限性，认为过度抽象会导致代码复杂化，反而违背了简化的初衷。适度的代码重复有时是保持代码可维护性的更好选择。&lt;/p&gt;
&lt;p&gt;第三原则关注测试策略，建议避免过度使用Mock。Mock虽然能简化单元测试，但可能导致测试与实际环境脱节。作者推荐使用真实依赖或本地服务器进行测试，以提高测试的可靠性和实际意义。&lt;/p&gt;
&lt;p&gt;第四原则强调最小化可变状态的重要性。在优化过程中，过度依赖缓存和数据库会增加状态管理的复杂性。现代计算机性能足够强大，可以承受一定的冗余计算，因此简洁的状态管理应该优先于性能优化。&lt;/p&gt;
&lt;h2 id="核心概念及解读"&gt;核心概念及解读&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;单一数据源&lt;/strong&gt;：指同一数据应该只在一个地方维护和存储，避免在多个位置重复保存相同数据。当需要数据时，应该从唯一的数据源获取，而不是使用本地缓存或副本。对于派生数据，应该通过计算获得而不是单独存储，这样可以避免数据同步错误和一致性问题的发生。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PRY原则&lt;/strong&gt;：即&amp;quot;Please Repeat Yourself&amp;quot;，是对传统DRY原则的反思和补充。DRY原则强调不要重复代码，但过度应用会导致不必要的抽象，使代码变得复杂难懂。PRY原则认为，适度的代码重复是可接受的，有时候甚至是更好的选择，因为它可以保持代码的简单性和可读性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mock依赖&lt;/strong&gt;：指在测试中使用模拟对象替代真实的依赖组件。Mock可以隔离被测试的代码，简化测试环境，但过度使用会导致测试与实际生产环境脱节，测试可能通过但实际运行时出现问题。作者建议尽量使用真实依赖或集成测试来验证软件的正确性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;可变状态&lt;/strong&gt;：指程序运行过程中可以改变的数据状态。可变状态越多，状态同步和一致性管理的难度就越大。最小化可变状态意味着减少程序中需要维护的动态数据，优先使用不可变数据和计算结果，这样可以降低软件复杂度，减少同步错误的发生概率。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;派生数据&lt;/strong&gt;：指从原始数据通过计算或处理得到的数据。例如，可支配余额是从账户余额减去固定支出计算得到的。派生数据应该动态计算而不是单独存储，这样可以避免维护多个数据源导致的同步问题，确保数据的一致性和准确性。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="原文信息"&gt;原文信息&lt;/h2&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;字段&lt;/th&gt;
 &lt;th&gt;内容&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;原文&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://read.engineerscodex.com/p/4-software-design-principles-i-learned?utm_source=bonobopress&amp;amp;utm_medium=newsletter&amp;amp;utm_campaign=1800"&gt;4 Software Design Principles I Learned the Hard Way&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;作者&lt;/td&gt;
 &lt;td&gt;Engineers Codex&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;发表日期&lt;/td&gt;
 &lt;td&gt;2025-01-22&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;此文档由 AI 自动整理&lt;/em&gt;&lt;/p&gt;</description></item></channel></rss>
:root{
  --ac-bg: var(--card-bg, var(--surface, var(--bg, #ffffff)));
  --ac-border: var(--border, rgba(15,23,42,0.12));
  --ac-fg: var(--text, #111827);
  --ac-sub: rgba(15,23,42,0.65);
  --ac-icon-bg: rgba(15,23,42,0.06);
  --ac-shadow: var(--card-shadow, none);
  --ac-shadow-hover: var(--card-shadow-hover, none);
  --ac-illu-shadow: var(--card-shadow, none);
  --ac-caption-bg: rgba(15,23,42,0.74);
  --ac-caption-fg: #fff;
}

html[data-theme="dark"]{
  --ac-bg: var(--card-bg, var(--surface, rgba(13,19,33,0.94)));
  --ac-border: rgba(148,163,184,0.2);
  --ac-fg: var(--text, #e5e7eb);
  --ac-sub: rgba(226,232,240,0.72);
  --ac-icon-bg: rgba(148,163,184,0.14);
  --ac-shadow: var(--card-shadow, none);
  --ac-shadow-hover: var(--card-shadow-hover, none);
  --ac-illu-shadow: var(--card-shadow, none);
  --ac-caption-bg: rgba(15,23,42,0.78);
  --ac-caption-fg: #f9fafb;
}

@media (prefers-color-scheme: dark){
  :root:not([data-theme]){
    --ac-bg: var(--card-bg, var(--surface, rgba(13,19,33,0.94)));
    --ac-border: rgba(148,163,184,0.2);
    --ac-fg: #e5e7eb;
    --ac-sub: rgba(226,232,240,0.72);
    --ac-icon-bg: rgba(148,163,184,0.14);
    --ac-shadow: var(--card-shadow, none);
    --ac-shadow-hover: var(--card-shadow-hover, none);
    --ac-illu-shadow: var(--card-shadow, none);
    --ac-caption-bg: rgba(15,23,42,0.78);
    --ac-caption-fg: #f9fafb;
  }
}

/* Base card */
.ac-card{border:1px solid var(--ac-border);border-radius:14px;background:var(--ac-bg);color:var(--ac-fg);display:flex;gap:12px;align-items:center;padding:14px;transition:transform .18s ease,border-color .18s ease;box-shadow:var(--ac-shadow)}
.ac-card.is-link:hover{transform:translateY(-2px);border-color:var(--ac-border);box-shadow:var(--ac-shadow-hover)}
.ac-title{font-weight:700;margin:0 0 4px 0;color:inherit}
.ac-desc{line-height:1.6;margin:0;color:var(--ac-sub)}
.ac-icon{width:28px;height:28px;display:inline-flex;align-items:center;justify-content:center;border-radius:8px;background:var(--ac-icon-bg)}
.ac-icon-img{max-width:28px;max-height:28px;display:block}

/* Icon card sizes */
.ac-card.icon.size-small{padding:10px;border-radius:12px}
.ac-card.icon.size-small .ac-icon{width:22px;height:22px;border-radius:6px}
.ac-card.icon.size-small .ac-icon-img{max-width:22px;max-height:22px}
.ac-card.icon.size-small .ac-title{font-size:.95rem}
.ac-card.icon.size-small .ac-desc{font-size:.86rem}

.ac-card.icon.size-medium{padding:14px}
.ac-card.icon.size-medium .ac-title{font-size:1.05rem}

/* Illustration cards */
.ac-card.illust{align-items:stretch}
.ac-illu{flex:0 0 42%;display:flex;align-items:center;justify-content:center}
.ac-illu img{max-width:100%;max-height:160px;border-radius:12px;box-shadow:var(--ac-illu-shadow)}
.ac-body{flex:1;display:flex;flex-direction:column;justify-content:center}
.ac-card.illust.variant-medium-left{min-height:180px}
.ac-card.illust.variant-large-top{flex-direction:column;align-items:flex-start}
.ac-card.illust.variant-large-top .ac-illu{width:100%;flex:0 0 auto;margin-bottom:10px}
.ac-card.illust.variant-large-top .ac-illu img{max-height:220px}

/* Image cards */
.ac-card.image{padding:0;overflow:hidden}
.ac-card.image .ac-fig{position:relative}
.ac-card.image .ac-fig .ac-image{display:block;width:100%;height:auto;border-radius:0}
.ac-card.image .ac-fig .ac-image.has-shadow{filter:drop-shadow(0 14px 26px rgba(15,23,42,0.18))}
html[data-theme="dark"] .ac-card.image .ac-fig .ac-image.has-shadow{filter:drop-shadow(0 18px 34px rgba(8,14,26,0.55))}
.ac-card.image.variant-medium .ac-fig .ac-caption{position:absolute;left:10px;right:10px;bottom:10px;background:var(--ac-caption-bg);color:var(--ac-caption-fg);border-radius:10px;padding:8px 10px;font-size:.92rem;backdrop-filter:blur(6px)}
.ac-card.image.variant-large .ac-fig{aspect-ratio:4/3}
.ac-card.image.variant-large .ac-body{padding:12px 14px}
.ac-card.image.variant-large .ac-body .ac-desc{margin-top:6px}

/* Grid helpers */
.ac-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px}

@media (max-width: 640px){
  .ac-grid{grid-template-columns:1fr}
  .ac-card.illust.variant-medium-left{flex-direction:column}
  .ac-illu{flex-basis:auto;margin-bottom:10px}
}

/* Social row (horizontal icons) */
.social-icons{display:flex;flex-wrap:wrap;gap:10px 12px;align-items:center;margin:8px 0 2px}
.social-icon-btn{display:inline-flex;align-items:center;justify-content:center;width:60px;height:60px;border-radius:12px;text-decoration:none;background:var(--social-icon-btn-bg, var(--social-icon-color, rgba(148,163,184,0.14)));border:none;box-shadow:none;position:relative;overflow:hidden;transition:transform .18s ease,box-shadow .18s ease}
.social-icon-btn img{display:block;width:74%;height:74%;object-fit:contain;filter:var(--social-icon-filter,none)!important;mix-blend-mode:normal!important;opacity:1!important}
.social-icon-btn:hover{transform:translateY(-2px);box-shadow:0 10px 26px rgba(15,23,42,0.16)}
.social-icon-btn--mask{background:var(--social-icon-btn-bg, var(--social-icon-color, rgba(148,163,184,0.14)))}
.social-icon-btn--mask::before{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:32px;height:32px;background:#fff;-webkit-mask-image:var(--social-icon-mask);mask-image:var(--social-icon-mask);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;-webkit-mask-size:contain;mask-size:contain}
.social-icon-btn--mask img{display:none}
.social-icon-btn:hover{transform:translateY(-2px)}

/* Icon card with right media */
.ac-card.icon.has-media{align-items:stretch;min-height:120px}
.ac-card.icon.has-media .ac-icon{align-self:flex-start}
.ac-card.icon.has-media .ac-body{flex:1 1 50%;display:flex;flex-direction:column;justify-content:center}
.ac-card.icon.has-media .ac-media-right{flex:1 1 50%;display:flex;align-items:stretch;justify-content:stretch}
.ac-card.icon.has-media .ac-media-right img{width:100%;height:100%;object-fit:cover;border-top-right-radius:14px;border-bottom-right-radius:14px}

/* Row icons: 方形倒圆角 + 原图（可选反白），与 sociallink 思路一致 */
.row-icon{
  --ri-size: 60px;
  --ri-radius: 12px;
  --ri-bg: rgba(148,163,184,0.14);
  --ri-scale: 0.74;
  --ri-filter: none;

  width: var(--ri-size);
  height: var(--ri-size);
  border-radius: var(--ri-radius);
  background: var(--ri-bg);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  overflow: hidden;
  transition: transform .18s ease, box-shadow .18s ease;
}
.row-icon:hover{ transform: translateY(-2px); box-shadow: 0 10px 26px rgba(15,23,42,0.16); }
.row-icon > img{
  width: calc(var(--ri-size) * var(--ri-scale));
  height: calc(var(--ri-size) * var(--ri-scale));
  object-fit: contain;
  filter: var(--ri-filter);
  display: block;
}

@media (max-width: 640px){
  .ac-card.icon.has-media{min-height:100px}
  .ac-card.icon.has-media .ac-media-right{display:none}
}
